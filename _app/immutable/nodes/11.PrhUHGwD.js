import{e as be}from"../chunks/index.DUkQoHGV.js";import{p as ne,r as ce,s as oe,d as _e}from"../chunks/db.SHkFEn0i.js";import{d as me,a as f,t as C,s as S,r as ve,c as te,h as xe}from"../chunks/disclose-version.bD0kEr0Y.js";import{p as se,s,j as z,c as r,r as t,t as h,g as a,n as ue,a as ie,b as U,d,al as he,e as ye,$ as we}from"../chunks/runtime.NkCrfN_B.js";import{i as V}from"../chunks/if.BQ7NR3mh.js";import{p as E}from"../chunks/proxy.B8o5R4Xe.js";import"../chunks/legacy.CPYThMws.js";import{e as re,i as ae}from"../chunks/each.CcwbMJOJ.js";import{c as le}from"../chunks/svelte-component.DFBsx8bq.js";import{M as fe}from"../chunks/Milestone.BWXUno7V.js";import{b as Se,a as de}from"../chunks/input.DT_BWzvP.js";import{b as ke}from"../chunks/select.DJoPLiCy.js";import{p as Ce}from"../chunks/props.CoMpn4C5.js";import{o as Be}from"../chunks/index-client.DEimdaJB.js";import{c as K,k as ge,d as Pe}from"../chunks/util.DdrE0CmF.js";import{I as Ie,C as Te,S as De}from"../chunks/ServicePage.D60NrEdc.js";import{B as Me}from"../chunks/BackButtonArrow.ChllQ7cH.js";const je=async()=>[{slug:"1"},{slug:"2"}],Re=({params:y})=>{const e=y.slug.toLowerCase(),i=ne("services",{},{id:Number(e)});if(!i)throw be(404,"No matching tag found for your search");return{service:i}},_t=Object.freeze(Object.defineProperty({__proto__:null,entries:je,load:Re},Symbol.toStringTag,{value:"Module"}));var Oe=()=>{window.history.back()},Ae=C('<button class="mb-4 inline-flex items-center rounded border border-orange-500 px-4 py-2 text-sm font-medium text-orange-500 hover:bg-orange-50">Back</button>');function Ee(y){var e=Ae();e.__click=[Oe],f(y,e)}me(["click"]);var Ne=C('<details class="rounded-md border p-4"><summary class="text-sm font-semibold"> </summary> <p class="mt-2 text-sm"> </p></details>'),He=C('<h2 class="mt-6 text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm">* Your money will be held and paid to the artist as per the completion of milestones.</p> <!> <h2 class="mt-6 text-lg font-semibold">Terms of Services</h2> <div class="mt-4 space-y-2"></div> <p class="mt-6 text-sm">* By proceeding to the commission, you agree with the proposed milestones and terms of service.</p>',1);function Ue(y,e){var k;se(e,!0);const i=(k=ne("tos",{},{artistId:e.selectedService.artistId}))==null?void 0:k.categories.filter(B=>e.selectedService.termsOfService[B.title]===!0);var m=He(),v=s(z(m),4);fe(v,{get selectedService(){return e.selectedService}});var u=s(v,4);re(u,21,()=>i,ae,(B,w)=>{var g=Ne(),b=r(g),P=r(b,!0);t(b);var I=s(b,2),_=r(I,!0);t(I),t(g),h(()=>{S(P,a(w).title),S(_,a(w).details)}),f(B,g)}),t(u),ue(2),f(y,m),ie()}var We=C('<option class="entry"> </option>'),qe=C('<div class="flex items-center"><input type="checkbox" class="h-4 w-4 rounded colour-border text-orange-500 focus:ring-orange-500"> <label class="ml-2 text-sm" style="user-select: none;"> </label></div>'),Fe=(y,e)=>{const i=y.target.value;e(i)},Le=C('<p class="-mt-4 text-sm text-red-500"> </p>'),Ye=C(`<div class="grid grid-cols-2 gap-6 pt-6"><div><div class="mb-4"><label for="type" class="block text-sm font-medium">Type *</label> <select id="type" class="mt-1 block w-full rounded-md entry shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"></select></div> <div class="mb-4"><label for="extras" class="block text-sm font-medium">Extras</label> <div class="mt-2 space-y-2"></div></div> <div class="mb-4"><label for="brief" class="block text-sm font-medium"> </label> <textarea id="brief" rows="3" class="mt-1 block w-full rounded-md entry shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm" placeholder="Input your brief idea..."></textarea> <div class="mt-2 flex items-center"><p class="mr-2 text-sm">Or</p> <label for="upload-brief" class="cursor-pointer rounded border colour-border px-3 py-1 text-sm 
                            bg-orange-500 text-white hover:bg-orange-600">Upload your brief</label> <input id="upload-brief" type="file" accept=".txt" class="hidden"></div></div> <div class="mb-4"><label for="deadline" class="block text-sm font-medium">Deadline *</label> <input id="deadline" type="date" class="mt-1 block w-full rounded-md entry shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"></div> <p class="mt-4 text-lg font-bold text-green-600"> </p></div> <div><h3 class="text-sm font-medium">References</h3> <!></div> <!></div>`);function ze(y,e){se(e,!0);let i=Ce(e,"commissionChoice",15),m=U(E([])),v=U(""),u=U(""),k=U(""),B=ye(()=>ge(e.selectedService,i()));const w=5e3,g=o=>{o.length>w?(d(k,`Brief cannot exceed ${w} characters.`),d(u,E(o.slice(0,w)))):(d(u,E(o)),d(k,""))},b=new Date;b.setDate(b.getDate()+1);const P=b.toISOString().split("T")[0],I=o=>{var l;const n=(l=o.target.files)==null?void 0:l[0];if(!n)return;if(n.type!=="text/plain"){d(k,"Only .txt files are allowed for the brief.");return}const c=new FileReader;c.onload=()=>{const x=c.result;g(x)},c.readAsText(n)},_=o=>{const n=o.target.files;if(n){if(a(m).length+n.length>10){d(v,"You can upload a maximum of 10 images.");return}for(const c of n){if(!c.type.startsWith("image/")){d(v,"Only image files (e.g., jpg, png) are allowed.");return}const l=new FileReader;l.onload=()=>{d(m,E([...a(m),l.result]))},l.readAsDataURL(c)}d(v,"")}},Z=o=>{d(m,E(a(m).filter((n,c)=>c!==o)))};Be(()=>{d(u,E(i().brief)),d(m,E(i().images))}),he(()=>{i(i().brief=a(u),!0),i(i().images=a(m),!0)});var T=Ye(),O=r(T),W=r(O),q=s(r(W),2);re(q,21,()=>e.selectedService.types,ae,(o,n,c)=>{var l=We();l.value=(l.__value=c)==null?"":c;var x=r(l);h(()=>S(x,`${a(n).name??""} (${K(a(n).price)??""})`)),t(l),f(o,l)}),t(q),t(W);var N=s(W,2),G=s(r(N),2);re(G,21,()=>e.selectedService.extras,ae,(o,n,c)=>{var l=qe(),x=r(l);ce(x);var A=s(x,2),J=r(A);h(()=>S(J,`${a(n).name??""} (+${(a(n).type==="percentage"?`${a(n).price} % of base price`:K(a(n).price))??""}
                            )`)),t(A),t(l),h(()=>{oe(x,"id",a(n).name),oe(A,"for",a(n).name)}),Se(x,()=>i().extras[c],pe=>i(i().extras[c]=pe,!0)),f(o,l)}),t(G),t(N);var D=s(N,2),M=r(D),Q=r(M);t(M);var j=s(M,2);ve(j),j.__input=[Fe,g];var X=s(j,2),$=s(r(X),4);$.__change=I,t(X),t(D);var H=s(D,2),F=s(r(H),2);ce(F),oe(F,"min",P),t(H);var ee=s(H,2),R=r(ee,!0);h(()=>S(R,K(a(B)))),t(ee),t(O);var p=s(O,2),L=s(r(p),2);Ie(L,{get uploadedImages(){return a(m)},get imageWarningMessage(){return a(v)},removeImage:Z,handleImageUpload:_}),t(p);var Y=s(p,2);V(Y,()=>e.warningMessage,o=>{var n=Le(),c=r(n,!0);t(n),h(()=>S(c,e.warningMessage)),f(o,n)}),t(T),h(()=>S(Q,`Brief * (${w-a(u).length} characters left)`)),ke(q,()=>i().selectedTier,o=>i(i().selectedTier=o,!0)),de(j,()=>a(u),o=>d(u,o)),de(F,()=>i().deadline,o=>i(i().deadline=o,!0)),f(y,T),ie()}me(["input","change"]);var Ge=C('<div><p> </p> <p class="font-medium"> </p></div>'),Qe=C("<p>No extras selected.</p>"),Xe=C('<img alt="Reference" class="h-32 w-full rounded-md border object-cover">'),Je=C(`<div class="pt-6"><!> <div class="mt-6 grid grid-cols-2 gap-6"><div><div class="mb-4 flex justify-between"><p class="font-medium">Type:</p> <p class="font-medium"> </p></div> <div class="mb-4 flex justify-between"><p class="font-medium">Base Price:</p> <p class="font-medium"> </p></div> <div class="mb-4 flex justify-between"><p class="font-medium">Extras:</p> <div class="text-right"><!> <!></div></div> <div class="mb-4"><p class="block font-medium">Brief:</p> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md colour-border entry
                    p-2 shadow-sm focus:colour-border focus:ring-0 sm:text-sm"></textarea></div> <div class="mb-4 flex justify-between"><p class="font-medium">Deadline:</p> <p class="font-medium"> </p></div></div> <div><p class="mb-2 block font-medium">References:</p> <div class="grid grid-cols-3 gap-2"></div> <div class="mt-6"><label for="payment-method" class="mb-2 block font-medium">Method</label> <select id="payment-method" class="mt-1 block w-full rounded-md entry 
                            shadow-sm focus:border-orange-500 focus:ring-orange-500 sm:text-sm"><option>Stripe</option><option>PayPal</option><option>Credit Card</option></select></div></div></div> <div class="flex items-center justify-between"><p class="text-sm">* Your payment will be held until the completion of commission milestones and refunded
            in case of cancellation.</p> <div class="text-right"><p class="text-lg font-bold text-green-600"> </p></div></div></div>`);function Ke(y,e){se(e,!0);const i=e.selectedService.types[e.commissionChoice.selectedTier].price,m=ge(e.selectedService,e.commissionChoice),v=e.selectedService.extras.filter((R,p)=>e.commissionChoice.extras[p]).length>0;var u=Je(),k=r(u);fe(k,{get selectedService(){return e.selectedService}});var B=s(k,2),w=r(B),g=r(w),b=s(r(g),2),P=r(b,!0);t(b),t(g);var I=s(g,2),_=s(r(I),2),Z=r(_,!0);h(()=>S(Z,K(i))),t(_),t(I);var T=s(I,2),O=s(r(T),2),W=r(O);re(W,17,()=>e.selectedService.extras,ae,(R,p,L)=>{var Y=te(),o=z(Y);V(o,()=>e.commissionChoice.extras[L],n=>{var c=Ge(),l=r(c),x=r(l);t(l);var A=s(l,2),J=r(A);h(()=>S(J,`+${(a(p).type==="percentage"?a(p).price+"% ("+K(Math.round(i*a(p).price/100))+")":K(a(p).price))??""}`)),t(A),t(c),h(()=>S(x,`${a(p).name??""}:`)),f(n,c)}),f(R,Y)});var q=s(W,2);V(q,()=>!v,R=>{var p=Qe();f(R,p)}),t(O),t(T);var N=s(T,2),G=s(r(N),2);ve(G),t(N);var D=s(N,2),M=s(r(D),2),Q=r(M);h(()=>S(Q,`${e.commissionChoice.deadline??""}
                    [${Pe(e.commissionChoice.deadline)??""}]`)),t(M),t(D),t(w);var j=s(w,2),X=s(r(j),2);re(X,21,()=>e.commissionChoice.images,ae,(R,p)=>{var L=Xe();h(()=>oe(L,"src",a(p))),f(R,L)}),t(X),ue(2),t(j),t(B);var $=s(B,2),H=s(r($),2),F=r(H),ee=r(F,!0);h(()=>S(ee,K(m))),t(F),t(H),t($),t(u),h(()=>{S(P,e.selectedService.types[e.commissionChoice.selectedTier].name),_e(G,`${e.commissionChoice.brief??""}
                `)}),f(y,u),ie()}var Ve=C("<!> <!>",1),Ze=C(`<div class="fixed inset-0 z-50 overflow-y-auto"><div class="relative !bg-gray-100 dark:!bg-stone-900 h-full"><div class="mb-4 flex w-full justify-between border-b-2 pt-4 pb-2
            colour-border px-2 sm:px-6 md:px-8 lg:px-10"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16 !bg-gray-100 dark:!bg-stone-900 pb-6"><div class="card-container px-6"><div class="space-y-2"><h1 class="text-3xl font-bold"> </h1> <p class="text-sm"> </p></div> <!></div></div></div></div>`);function $e(y,e){se(e,!0);let i=U(""),m=U(E({selectedTier:e.tierIndex,extras:e.selectedService.extras.map(D=>!1),brief:"",images:[],deadline:""})),v=U(0),u=[{component:Ue,backwards:"Back to Overview",forwards:"Proceed to Brief"},{component:ze,backwards:"Back to Type Selection",forwards:"Proceed to Checkout"},{component:Ke,backwards:"Back to Brief",forwards:"Submit Request"}];const k=()=>{if(a(m).brief==="")return d(i,"Please provide a brief for your commission."),!1;if(a(m).deadline==="")return d(i,"Please provide a deadline for your commission."),!1;const D=new Date().setHours(0,0,0,0);return new Date(a(m).deadline).setHours(0,0,0,0)<=D?(d(i,"Deadline must be after today."),!1):(d(i,""),!0)};function B(){a(v)===1&&!k()||(a(v)<u.length-1?d(v,a(v)+1):a(v)===u.length-1&&(alert("Request Submitted!"),e.closePlaceCommission()))}function w(){a(v)>0?d(v,a(v)-1):e.closePlaceCommission()}var g=Ze(),b=r(g),P=r(b),I=r(P);Me(I,{get closeEdit(){return e.closePlaceCommission},buttonText:"Place Commission Request"}),t(P);var _=s(P,2),Z=r(_),T=r(Z),O=r(T),W=r(O,!0);t(O);var q=s(O,2),N=r(q,!0);t(q),t(T);var G=s(T,2);re(G,17,()=>u,ae,(D,M,Q)=>{let j=()=>a(M).component,X=()=>a(M).backwards,$=()=>a(M).forwards;var H=te(),F=z(H);V(F,()=>Q===a(v),ee=>{var R=Ve(),p=z(R);V(p,()=>Q===1,Y=>{var o=te(),n=z(o);le(n,j,(c,l)=>{l(c,{get selectedService(){return e.selectedService},get warningMessage(){return a(i)},get commissionChoice(){return a(m)},set commissionChoice(x){d(m,E(x))}})}),f(Y,o)},Y=>{var o=te(),n=z(o);V(n,()=>Q===2,c=>{var l=te(),x=z(l);le(x,j,(A,J)=>{J(A,{get selectedService(){return e.selectedService},get commissionChoice(){return a(m)}})}),f(c,l)},c=>{var l=te(),x=z(l);le(x,j,(A,J)=>{J(A,{get selectedService(){return e.selectedService}})}),f(c,l)},!0),f(Y,o)});var L=s(p,2);Te(L,{goToPreviousStep:w,proceedToNextStep:B,get backwards(){return X()},get forwards(){return $()}}),f(ee,R)}),f(D,H)}),t(Z),t(_),t(b),t(g),h(()=>{S(W,e.selectedService.title),S(N,e.currentArtist.displayName)}),f(y,g),ie()}var et=C('<div class="card-island"><!> <!> <!></div>');function xt(y,e){se(e,!0);const i=e.data.service,m=ne("artwork",{},{}).filter(_=>i.samples.includes(_.imgSrc)),v=ne("user",{},{id:i.artistId});let u=U(!1),k=U(0);function B(_){d(k,E(_)),d(u,!0)}function w(){d(u,!1)}var g=et();xe(_=>{h(()=>we.title=`BrushHub - ${i.title??""}`)});var b=r(g);V(b,()=>a(u),_=>{$e(_,{selectedService:i,closePlaceCommission:w,get tierIndex(){return a(k)},currentArtist:v})});var P=s(b,2);Ee(P);var I=s(P,2);De(I,{selectedService:i,artDB:m,currentArtist:v,openPlaceCommission:B}),t(g),f(y,g),ie()}export{xt as component,_t as universal};
