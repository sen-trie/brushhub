import{e as C}from"../chunks/index.DMxzPKVy.js";import{g as w}from"../chunks/util.BSZWymh8.js";import{p as f}from"../chunks/db.BTs8aeET.js";import{c as O,a as _,t as j}from"../chunks/disclose-version.BEEGi2oI.js";import{p as y,b as d,f as b,a as B,s as D,g as u,d as l}from"../chunks/runtime.C-s0Hq_6.js";import{i as R}from"../chunks/if.DN0dI3wX.js";import{p as c}from"../chunks/proxy.CWL-fuXM.js";import{C as V,V as k}from"../chunks/CommissionOrderTab.CAa7Rc8X.js";const x=!1,I=async()=>[{slug:"hungry_anne"}],S=({params:p})=>{const a=p.slug.toLowerCase(),o=w(),t=f("user",{},{username:a});if(!t||o.username!==t.username)throw C(404,"You are not the current user");let s=f("request",{customerId:t.id},{});return s=s.map(n=>({...n,service:f("services",{},{id:n.serviceId})})),{request:s}},A=Object.freeze(Object.defineProperty({__proto__:null,entries:I,load:S,ssr:x},Symbol.toStringTag,{value:"Module"}));var T=j('<h1 class="page-title mb-2">Your Commissions</h1> <!>',1);function F(p,a){var v;y(a,!0);let o=d(c((v=a.data)==null?void 0:v.request)),t=d(c({})),s=d(!1);const n=r=>{l(s,!0),l(t,c(r))},h=(r,e)=>{const i=e.service.milestones.map(m=>({approval:null,name:m.name,date:null,feedback:"",sample:[]}));r?e.state={value:"active",progress:i}:e.state={value:"rejected",progress:i},l(o,c(u(o).map(m=>m.id===e.id?e:m)))};var g=O(),q=b(g);R(q,()=>u(s),r=>{k(r,{closeRequest:()=>l(s,!1),get request(){return u(t)},artistView:!0,editEntry:h})},r=>{var e=T(),i=D(b(e),2);V(i,{commissionOrOrder:!0,get requestDB(){return u(o)},openRequest:n}),_(r,e)}),_(p,g),B()}export{F as component,A as universal};
