import{e as C}from"../chunks/index.D5fZukMd.js";import{g as w}from"../chunks/util.Cz9rOmTz.js";import{p as f}from"../chunks/db.CoitI51B.js";import{c as O,a as _,t as y}from"../chunks/disclose-version.CO6q0Qfh.js";import{p as B,s as d,f as b,b as D,d as R,g as u,a as l}from"../chunks/runtime.DMxaCD9P.js";import{i as V}from"../chunks/if.CoD_4mrj.js";import{p as c}from"../chunks/proxy.Dv8l_DbE.js";import{C as j,V as k}from"../chunks/CommissionOrderTab.BANyBaXU.js";const x=!1,I=async()=>[{slug:"hungry_anne"}],S=({params:p})=>{const o=p.slug.toLowerCase(),a=w(),t=f("user",{},{username:o});if(!t||a.username!==t.username)throw C(404,"You are not the current user");let s=f("request",{customerId:t.id},{});return s=s.map(n=>({...n,service:f("services",{},{id:n.serviceId})})),{request:s}},A=Object.freeze(Object.defineProperty({__proto__:null,entries:I,load:S,ssr:x},Symbol.toStringTag,{value:"Module"}));var T=y('<h1 class="page-title mb-2">Your Commissions</h1> <!>',1);function F(p,o){var v;B(o,!0);let a=d(c((v=o.data)==null?void 0:v.request)),t=d(c({})),s=d(!1);const n=r=>{l(s,!0),l(t,c(r))},h=(r,e)=>{const i=e.service.milestones.map(m=>({approval:null,name:m.name,date:null,feedback:"",sample:[]}));r?e.state={value:"active",progress:i}:e.state={value:"cancelled",progress:i},l(a,c(u(a).map(m=>m.id===e.id?e:m)))};var g=O(),q=b(g);V(q,()=>u(s),r=>{k(r,{closeRequest:()=>l(s,!1),get request(){return u(t)},artistView:!0,editEntry:h})},r=>{var e=T(),i=R(b(e),2);j(i,{commissionOrOrder:!0,get requestDB(){return u(a)},openRequest:n}),_(r,e)}),_(p,g),D()}export{F as component,A as universal};
