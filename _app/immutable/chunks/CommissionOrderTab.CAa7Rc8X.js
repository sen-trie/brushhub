import{a as p,t as w,r as se,s as o,d as X,b as Q}from"./disclose-version.BEEGi2oI.js";import{p as N,s as i,f as Z,a as I,c as s,t as x,r as a,n as re,g as j,e as ie,b as M,d as h}from"./runtime.C-s0Hq_6.js";import{i as $}from"./if.DN0dI3wX.js";import{s as le}from"./class.Bsjm69_Q.js";import{p as L}from"./props.BcShvcsW.js";import{s as ne,a as de}from"./store.QkJGiwQc.js";import{s as ve,c as ue,p as Y}from"./db.BTs8aeET.js";import{T as ee}from"./Tabs.BNvg4tt0.js";import{M as ce}from"./Milestone.CeQQvtuZ.js";import{e as z,i as U}from"./each.Bjkk2cOk.js";import{d as oe,c as me,n as pe}from"./util.BSZWymh8.js";import{B as fe}from"./BackButtonArrow.CrHRm9p3.js";import{p as xe}from"./stores.DhNZ7SaZ.js";import{p as A}from"./proxy.CWL-fuXM.js";var be=w('<h2 class="text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm text-gray-500">* Your money will be held and paid to the artist as per the completion of milestones.</p> <!>',1);function ge(n,e){N(e,!0);const r=e.props.request;var t=be(),l=i(Z(t),4);ce(l,{get selectedService(){return r.service},get currentService(){return r.state}}),p(n,t),I()}var _e=w('<span class="font-medium text-gray-900"> </span>'),qe=w('<p class="text-gray-500">No extras selected.</p>'),ye=w('<img alt="Reference" class="h-32 w-full rounded-md border object-cover">'),he=w('<div><div class="grid grid-cols-2 gap-6"><div><div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Type:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Extras:</span> <div class="text-right"></div></div> <div class="mb-4"><span class="block font-medium text-gray-700">Brief:</span> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm focus:border-gray-300 focus:ring-0 sm:text-sm"></textarea></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Deadline:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Add-in Services:</span></div></div> <div><span class="mb-2 block font-medium text-gray-700">References:</span> <div class="grid grid-cols-3 gap-2"></div></div></div> <div class="mb-4 flex justify-end"><span class="page-title pr-4"> </span></div></div>');function W(n,e){N(e,!0);const r=e.props.request;r.service;const t=r;var l=he(),u=s(l),d=s(u),c=s(d),R=i(s(c),2),P=s(R,!0);a(R),a(c);var f=i(c,2),S=i(s(f),2);z(S,21,()=>r.extras,U,(v,y)=>{var k=_e(),O=s(k,!0);a(k),x(()=>o(O,j(y))),p(v,k)},v=>{var y=qe();p(v,y)}),a(S),a(f);var m=i(f,2),C=i(s(m),2);se(C),a(m);var b=i(m,2),E=i(s(b),2),g=s(E);x(()=>o(g,`${t.deadline??""}
                    [${oe(t.deadline)??""}]`)),a(E),a(b),re(2),a(d);var _=i(d,2),D=i(s(_),2);z(D,21,()=>t.images,U,(v,y)=>{var k=ye();x(()=>ve(k,"src",j(y))),p(v,k)}),a(D),a(_),a(u);var T=i(u,2),B=s(T),q=s(B);x(()=>o(q,`Net Total: ${me(t.price)??""}`)),a(B),a(T),a(l),x(()=>{o(P,r.type),ue(C,`${t.brief??""}
                `)}),p(n,l),I()}var we=(n,e,r,t,l)=>pe(`./profile/${e()?r==null?void 0:r.username:t==null?void 0:t.username}`,l().url.pathname),Re=(n,e,r)=>{e()(!1,r.request),r.closeRequest()},De=(n,e,r)=>{e()(!0,r.request),r.closeRequest()},Be=w('<!> <div class="flex w-full justify-end space-x-2"><button class="discard-button">Reject</button> <button class="save-button">Accept</button></div>',1),ke=w(`<div class="fixed inset-0 z-50 overflow-y-auto bg-white"><div class="relative p-6"><div class="mb-4 flex w-full justify-between border-b-2 p-4 px-2
            pt-0 sm:px-4 md:px-6 lg:px-8"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16"><div class="card-container"><div class="flex mb-4 justify-between items-center"><div class="flex flex-col items-start"><h1 class="page-title"> </h1> <button class="text-l text-gray-500 underline"> </button></div> <div><p> </p></div></div> <!></div></div></div></div>`);function He(n,e){N(e,!0);const r=ne(),t=()=>de(xe,"$page",r);let l=L(e,"artistView",3,!1),u=L(e,"editEntry",3,()=>{});const d=Y("user",{},{id:e.request.artistId}),c=Y("user",{},{id:e.request.customerId}),R=l()&&e.request.state.value==="pending";let P=[{label:"Progress",value:1,component:ge,props:{request:e.request}},{label:"Request Summary",value:2,component:W,props:{request:e.request}}];var f=ke(),S=s(f),m=s(S),C=s(m);fe(C,{get closeEdit(){return e.closeRequest},buttonText:"View Commission Request"}),a(m);var b=i(m,2),E=s(b),g=s(E),_=s(g),D=s(_),T=s(D,!0);a(D);var B=i(D,2);B.__click=[we,l,c,d,t];var q=s(B,!0);a(B),a(_);var v=i(_,2),y=s(v),k=s(y);a(y),a(v),a(g);var O=i(g,2);$(O,()=>!R,F=>{ee(F,{items:P})},F=>{var G=Be(),H=Z(G),te=ie(()=>({request:e.request}));W(H,{get props(){return j(te)}});var J=i(H,2),K=s(J);K.__click=[Re,u,e];var ae=i(K,2);ae.__click=[De,u,e],a(J),p(F,G)}),a(E),a(b),a(S),a(f),x(()=>{o(T,e.request.service.title),o(q,l()?`Requested by: ${c==null?void 0:c.displayName}`:`Service by: ${d==null?void 0:d.displayName}`),le(y,`text-lg text-gray-500 
                                ${(e.request.state.value==="active"?"text-green-500":"")??""} 
                                ${(e.request.state.value==="rejected"?"text-red-500":"")??""}
                                ${(e.request.state.value==="pending"?"text-yellow-500":"")??""}
                        mr-4`),o(k,`State:
                            ${(e.request.state.value==="pending"?"Pending":e.request.state.value==="active"?"In Progress":e.request.state.value==="rejected"?"Rejected":e.request.state.value==="completed"?"Completed":"Cancelled")??""}`)}),p(n,f),I()}X(["click"]);var je=(n,e)=>{e.openRequest(e.request)},Se=w('<tr class="border-b text-sm"><td class="px-4 py-2"><div class="flex flex-col"><span class="font-semibold"> </span> <span class="text-xs text-gray-500"> </span></div></td><td class="px-4 py-2"> </td><td class="px-4 py-2"> </td><td class="px-4 py-2"><span class="font-semibold"><!></span></td><td class="px-4 py-2"><button class="apply-button rounded-full bg-orange-500 p-3 px-6 text-white">View Details</button></td></tr>');function Ee(n,e){N(e,!0),L(e,"editEntry",3,()=>{});const r=Y("user",{},{id:e.request.artistId});let t=M(""),l=M(A({name:"",date:""}));switch(e.request.state.value){case"active":h(t,"Active"),h(l,A(e.request.state.progress.find(q=>q.date!==null)));break;case"cancelled":h(t,"Cancelled");break;case"finished":h(t,"Finished");break;case"pending":h(t,"Pending Acceptance");break;case"rejected":h(t,"Rejected");break;default:h(t,"Pending Acceptance");break}var u=Se(),d=s(u),c=s(d),R=s(c),P=s(R,!0);a(R);var f=i(R,2),S=s(f,!0);a(f),a(c),a(d);var m=i(d),C=s(m,!0);a(m);var b=i(m),E=s(b,!0);x(()=>o(E,new Date(e.request.deadline).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}))),a(b);var g=i(b),_=s(g),D=s(_);$(D,()=>j(t)==="Active",q=>{var v=Q();x(()=>o(v,j(l).name)),p(q,v)},q=>{var v=Q();x(()=>o(v,j(t))),p(q,v)}),a(_),a(g);var T=i(g),B=s(T);B.__click=[je,e],a(T),a(u),x(()=>{o(P,e.request.service.title),o(S,r==null?void 0:r.displayName),o(C,e.request.type)}),p(n,u),I()}X(["click"]);var Te=w('<table class="-mt-4 w-full border-collapse text-left"><thead><tr class="border-b text-sm font-medium text-gray-700"><th class="px-4 py-2 w-4/12">SERVICE</th><th class="px-4 py-2 w-2/12">TYPE</th><th class="px-4 py-2 w-2/12">DEADLINE</th><th class="px-4 py-2 w-2/12">STATE</th><th class="px-4 py-2 w-2/12">ACTIONS</th></tr></thead><tbody></tbody></table>');function V(n,e){N(e,!0);const r=e.props.requestDB,t=e.props.openRequest;var l=Te(),u=i(s(l));z(u,21,()=>r,U,(d,c)=>{Ee(d,{get request(){return j(c)},openRequest:t})}),a(u),a(l),p(n,l),I()}function Je(n,e){N(e,!0);let r=M(A([]));e.commissionOrOrder?h(r,A([{label:`New Requests (${e.requestDB.filter(t=>t.state.value==="pending").length})`,value:1,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="pending"),openRequest:e.openRequest}},{label:`Active (${e.requestDB.filter(t=>t.state.value==="active").length})`,value:2,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="active"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:3,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="cancelled"||t.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:4,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="finished"),openRequest:e.openRequest}}])):h(r,A([{label:"Active",value:1,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="active"||t.state.value==="pending"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:2,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="cancelled"||t.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:3,component:V,props:{requestDB:e.requestDB.filter(t=>t.state.value==="finished"),openRequest:e.openRequest}}])),ee(n,{get items(){return j(r)}}),I()}export{Je as C,He as V};
