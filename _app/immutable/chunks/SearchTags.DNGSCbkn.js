import{d as R,a as h,t as b,s as D}from"./disclose-version.BEEGi2oI.js";import{p as U,u as q,t as S,a as F,g as e,d as i,b as T,e as G,s as C,c as f,r as o,n as H}from"./runtime.C-s0Hq_6.js";import{i as J}from"./if.DN0dI3wX.js";import{e as B,i as E}from"./each.Bjkk2cOk.js";import{r as N,p as O}from"./db.BTs8aeET.js";import{s as L}from"./class.Bsjm69_Q.js";import{a as P}from"./input.Asw2ctPt.js";import{b as V}from"./this.D35C3XGh.js";import{p as W}from"./props.BcShvcsW.js";function X(n,r,s,a,u,m){e(r)&&e(s).length>0&&(n.key==="ArrowDown"?(n.preventDefault(),i(a,(e(a)+1)%e(s).length)):n.key==="ArrowUp"?(n.preventDefault(),i(a,(e(a)-1+e(s).length)%e(s).length)):n.key==="Enter"&&(u.currentTags.push(e(s)[e(a)].name),m()))}var Y=b('<div class="items-center space-x-1 rounded bg-orange-100 px-2 py-1 text-orange-500"><span> </span> <button class="text-xs font-bold">x</button></div>'),Z=(n,r,s,a)=>{r.currentTags.push(e(s).name),a()},I=b('<li><span> </span> <span class="text-sm text-gray-500"> </span></li>'),$=b('<ul class="left-0 z-30 mt-1 w-full rounded-lg border border-gray-300 bg-white shadow-lg"></ul>'),ee=b('<div class="relative"><div><div></div> <input type="text" placeholder="Search for tags..." class="w-full rounded-md border-gray-300 shadow-sm focus:border-orange-500 focus:ring-orange-500"></div> <!></div>');function ce(n,r){U(r,!0);let s=W(r,"slim",3,!1),a=T(""),u=T(!1),m=G(()=>O("tags",{name:t=>t.name.toLowerCase().includes(e(a).toLowerCase())&&!r.currentTags.includes(t.name.toLowerCase())},{}).sort((t,c)=>c.count-t.count)),w=T(0),A=null;q(()=>{e(a).length>0?i(u,!0):i(u,!1)});function j(){i(a,""),i(u,!1),i(w,0)}var x=ee(),p=f(x),g=f(p);B(g,21,()=>r.currentTags,E,(t,c,y)=>{var l=Y();l.__click=()=>r.currentTags.splice(y,1);var _=f(l),d=f(_,!0);o(_),H(2),o(l),S(()=>D(d,e(c))),h(t,l)}),o(g);var v=C(g,2);N(v),v.__keydown=[X,u,m,w,r,j],V(v,t=>A=t,()=>A),o(p);var K=C(p,2);J(K,()=>e(u)&&e(m).length>0,t=>{var c=$();B(c,21,()=>e(m).slice(0,6),E,(y,l,_)=>{var d=I();d.__click=[Z,r,l,j];var k=f(d),M=f(k,!0);o(k);var z=C(k,2),Q=f(z);o(z),o(d),S(()=>{L(d,`flex cursor-pointer items-center justify-between px-4 py-2 text-gray-700 hover:bg-orange-100 ${(_===e(w)?"bg-orange-100":"")??""}`),D(M,e(l).name),D(Q,`(${e(l).count??""} Mentions)`)}),h(y,d)}),o(c),h(t,c)}),o(x),S(()=>{L(p,s()?"":"mt-1 block w-full rounded-md border border-gray-300 bg-white p-2 shadow-sm"),L(g,`${(r.currentTags.length>0?"mb-2":"")??""} flex flex-wrap gap-2`)}),P(v,()=>e(a),t=>i(a,t)),h(n,x),F()}R(["click","keydown"]);export{ce as S};
