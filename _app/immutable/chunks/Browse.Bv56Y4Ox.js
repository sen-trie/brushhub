import{d as rt,a as p,t as u,s as g}from"./disclose-version.BE_RHt7t.js";import{p as at,j as ot,a as st,g as r,b as it,c as o,t as d,s as l,r as e,d as G,e as lt}from"./runtime.CN-Xrd-W.js";import{i as x}from"./if.DakFUcz9.js";import{e as U,i as q}from"./each.-eFyfI3H.js";import{p as E,s as S,w as nt,a as dt,i as mt}from"./db.j2E7rg9Z.js";import{s as C}from"./class.YwXVpuit.js";import{p as ct}from"./proxy.D0RktEAV.js";import{p as h}from"./props.CZekZOSG.js";import{I as vt,X as pt}from"./Icon.BJmEIkJu.js";import{n as ut}from"./util.DaP6gxzo.js";import{p as ft}from"./index.C6qsGLwu.js";function gt(m,a){let _=h(a,"size",3,"24");vt(m,{src:pt,get size(){return _()}})}const _t=(m,a)=>{ut(`./profile/${r(a).username}`,ft.url.pathname)};function F(m,a){G(a,null)}var bt=(m,a,_)=>a(r(_)),wt=u('<span class="absolute left-2 top-2 rounded bg-gray-700 px-2 py-1 text-xs text-white">Closed</span>'),xt=u('<button type="button" aria-label="View artwork details"><img alt="Artwork"> <!></button>'),ht=u('<img alt="Artwork">'),yt=m=>m.stopImmediatePropagation(),kt=u('<span class="rounded bg-orange-100 px-2 py-1 text-xs font-medium text-orange-600"> </span>'),At=u(`<button class="mt-4 block rounded-lg bg-orange-500 px-4 py-2 
                                        text-center font-medium text-white"> </button>`),jt=u(`<div class="modal-pop" role="dialog" aria-modal="true"><div class="relative rounded-lg shadow-lg dark:bg-stone-800 border-2 colour-border flex 
                     w-5/6 sm:w-auto sm:max-w-[90%] p-2 sm:p-6 sm:pr-16" role="dialog" aria-labelledby="modal-title" aria-describedby="modal-description"><button class="absolute right-2 top-2 w-8 h-8 flex items-center justify-center rounded-full 
                        bg-red-500 text-white hover:bg-red-600 text-lg" aria-label="Close popup"><!></button> <div class="flex flex-col sm:flex-row justify-center"><img alt="Artwork" class="h-64 sm:h-[30rem] sm:max-w-[50vw] w-auto rounded-md object-contain
                           mt-2 sm:mt-0"> <div class="p-2 sm:p-0 ml-0 sm:ml-6 flex flex-col justify-between sm:max-w-[25vw] "><div><h2 class="text-xl font-bold"> </h2> <h2 class="text-lg underline"> </h2> <p> </p> <p class="mt-2 text-sm"> </p> <div class="mt-4 flex flex-wrap gap-2"></div></div> <div><!></div></div></div></div></div>`),Bt=u("<!> <!> <!>",1);function Xt(m,a){at(a,!0);const _=h(a,"showArtist",3,!0),I=h(a,"size",3,48),T=h(a,"artViewOnly",3,!1);let i=it(null),y=lt(()=>{var t;return E("user",{},{id:(t=r(i))==null?void 0:t.artist})});const H=mt("artwork"),J=t=>E("artist",{},{id:t});function K(t){typeof t!="string"&&G(i,ct(t))}function V(t){return typeof t=="string"&&t.startsWith("data:image")?t:typeof t=="object"&&t!==null&&!Array.isArray(t)&&t.imgSrc&&typeof t.imgSrc=="string"&&t.imgSrc.startsWith("data:image")?t.imgSrc:dt("artwork",t.imgSrc,H)}var M=Bt(),O=ot(M);U(O,17,()=>a.artDB,q,(t,s)=>{var n=xt();n.__click=[bt,K,s];var c=o(n);d(()=>S(c,"src",V(r(s))));var k=l(c,2);x(k,()=>{var v;return!((v=J(r(s).artist))!=null&&v.openCommission)&&!T()},v=>{var w=wt();p(v,w)}),e(n),d(()=>{C(n,`relative w-full overflow-hidden rounded-lg colour-border border-2 bg-white shadow
                ${(T()?"cursor-default":"cursor-pointer")??""}`),C(c,`h-${I()??""} w-full object-cover`)}),p(t,n)});var W=l(O,2);x(W,()=>a.artDB.length===0,t=>{var s=ht();d(()=>S(s,"src",nt("artwork",""))),d(()=>C(s,`h-${I()??""} w-full object-contain`)),p(t,s)});var Q=l(W,2);x(Q,()=>r(i),t=>{var s=jt();s.__click=[F,i];var n=o(s);n.__click=[yt];var c=o(n);c.__click=[F,i];var k=o(c);gt(k,{size:"20"}),e(c);var v=l(c,2),w=o(v);d(()=>S(w,"src",V(r(i))));var X=l(w,2),A=o(X),j=o(A),R=o(j,!0);e(j);var B=l(j,2),Y=o(B);e(B);var P=l(B,2),Z=o(P,!0);e(P);var z=l(P,2),$=o(z,!0);d(()=>g($,r(i).datePosted?"Posted: "+new Date(r(i).datePosted).toLocaleDateString():"")),e(z);var L=l(z,2);U(L,21,()=>r(i).tags,q,(D,f)=>{var b=kt(),et=o(b);e(b),d(()=>g(et,`#${r(f)??""}`)),p(D,b)}),e(L),e(A);var N=l(A,2),tt=o(N);x(tt,_,D=>{var f=At();f.__click=[_t,y];var b=o(f);e(f),d(()=>g(b,`To @${r(y).username??""}'s Profile`)),p(D,f)}),e(N),e(X),e(v),e(n),e(s),d(()=>{g(R,r(i).title||"Untitled Artwork"),g(Y,`By: ${r(y).displayName??""}`),g(Z,r(i).description)}),p(t,s)}),p(m,M),st()}rt(["click"]);export{Xt as B,gt as C};
