import{a as f,t as h,r as Z,s as v,d as J,b as G}from"./disclose-version.CO6q0Qfh.js";import{p as A,d as i,f as K,b as C,c as s,t as x,r as a,n as $,g as B,e as ee,s as F,a as y}from"./runtime.DMxaCD9P.js";import{i as Q}from"./if.CoD_4mrj.js";import{p as M}from"./props.DNKDIsES.js";import{s as te,a as ae}from"./store.BFnuxyNy.js";import{s as se,c as re,p as L}from"./db.CoitI51B.js";import{T as W}from"./Tabs.DuVLDXOk.js";import{M as ie}from"./Milestone.C7Zn3dfu.js";import{e as Y,i as z}from"./each.DPKI_RZ5.js";import{d as le,c as ne,n as de}from"./util.Cz9rOmTz.js";import{B as ce}from"./BackButtonArrow.DCQnn3TD.js";import{p as oe}from"./stores.UvzRrkDz.js";import{p as P}from"./proxy.Dv8l_DbE.js";var ue=h('<h2 class="text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm text-gray-500">* Your money will be held and paid to the artist as per the completion of milestones.</p> <!>',1);function ve(n,e){A(e,!0);const r=e.props.request;var t=ue(),l=i(K(t),4);ie(l,{get selectedService(){return r.service},get currentService(){return r.state}}),f(n,t),C()}var me=h('<span class="font-medium text-gray-900"> </span>'),pe=h('<p class="text-gray-500">No extras selected.</p>'),fe=h('<img alt="Reference" class="h-32 w-full rounded-md border object-cover">'),be=h('<div><div class="grid grid-cols-2 gap-6"><div><div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Type:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Extras:</span> <div class="text-right"></div></div> <div class="mb-4"><span class="block font-medium text-gray-700">Brief:</span> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm focus:border-gray-300 focus:ring-0 sm:text-sm"></textarea></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Deadline:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Add-in Services:</span></div></div> <div><span class="mb-2 block font-medium text-gray-700">References:</span> <div class="grid grid-cols-3 gap-2"></div></div></div> <div class="mb-4 flex justify-end"><span class="page-title pr-4"> </span></div></div>');function H(n,e){A(e,!0);const r=e.props.request;r.service;const t=r;var l=be(),o=s(l),d=s(o),u=s(d),R=i(s(u),2),I=s(R,!0);a(R),a(u);var b=i(u,2),k=i(s(b),2);Y(k,21,()=>r.extras,z,(c,w)=>{var D=me(),O=s(D,!0);a(D),x(()=>v(O,B(w))),f(c,D)},c=>{var w=pe();f(c,w)}),a(k),a(b);var m=i(b,2),V=i(s(m),2);Z(V),a(m);var _=i(m,2),j=i(s(_),2),g=s(j);x(()=>v(g,`${t.deadline??""}
                    [${le(t.deadline)??""}]`)),a(j),a(_),$(2),a(d);var S=i(d,2),q=i(s(S),2);Y(q,21,()=>t.images,z,(c,w)=>{var D=fe();x(()=>se(D,"src",B(w))),f(c,D)}),a(q),a(S),a(o);var E=i(o,2),N=s(E),p=s(N);x(()=>v(p,`Net Total: ${ne(t.price)??""}`)),a(N),a(E),a(l),x(()=>{v(I,r.type),re(V,`${t.brief??""}
                `)}),f(n,l),C()}var xe=(n,e,r,t,l)=>de(`./profile/${e()?r==null?void 0:r.username:t==null?void 0:t.username}`,l().url.pathname),_e=(n,e,r)=>{e()(!1,r.request),r.closeRequest()},ge=(n,e,r)=>{e()(!0,r.request),r.closeRequest()},qe=h('<!> <div class="flex w-full justify-end space-x-2"><button class="discard-button">Reject</button> <button class="save-button">Accept</button></div>',1),ye=h(`<div class="fixed inset-0 z-50 overflow-y-auto bg-white"><div class="relative p-6"><div class="mb-4 flex w-full justify-between border-b-2 p-4 px-2
            pt-0 sm:px-4 md:px-6 lg:px-8"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16"><div class="card-container"><h1 class="page-title"> </h1> <button class="text-l mb-4 text-gray-500 underline"> </button> <!></div></div></div></div>`);function Fe(n,e){A(e,!0);const r=te(),t=()=>ae(oe,"$page",r);let l=M(e,"artistView",3,!1),o=M(e,"editEntry",3,()=>{});const d=L("user",{},{id:e.request.artistId}),u=L("user",{},{id:e.request.customerId}),R=l()&&e.request.state.value==="pending";let I=[{label:"Progress",value:1,component:ve,props:{request:e.request}},{label:"Request Summary",value:2,component:H,props:{request:e.request}}];var b=ye(),k=s(b),m=s(k),V=s(m);ce(V,{get closeEdit(){return e.closeRequest},buttonText:"View Commission Request"}),a(m);var _=i(m,2),j=s(_),g=s(j),S=s(g,!0);a(g);var q=i(g,2);q.__click=[xe,l,u,d,t];var E=s(q,!0);a(q);var N=i(q,2);Q(N,()=>!R,p=>{W(p,{items:I})},p=>{var c=qe(),w=K(c),D=ee(()=>({request:e.request}));H(w,{get props(){return B(D)}});var O=i(w,2),U=s(O);U.__click=[_e,o,e];var X=i(U,2);X.__click=[ge,o,e],a(O),f(p,c)}),a(j),a(_),a(k),a(b),x(()=>{v(S,e.request.service.title),v(E,l()?`Requested by: ${u==null?void 0:u.displayName}`:`Service by: ${d==null?void 0:d.displayName}`)}),f(n,b),C()}J(["click"]);var he=(n,e)=>{e.openRequest(e.request)},Re=h('<tr class="border-b text-sm"><td class="px-4 py-2"><div class="flex flex-col"><span class="font-semibold"> </span> <span class="text-xs text-gray-500"> </span></div></td><td class="px-4 py-2"> </td><td class="px-4 py-2"> </td><td class="px-4 py-2"><span class="font-semibold"><!></span></td><td class="px-4 py-2"><button class="apply-button rounded-full bg-orange-500 p-3 px-6 text-white">View Details</button></td></tr>');function we(n,e){A(e,!0),M(e,"editEntry",3,()=>{});const r=L("user",{},{id:e.request.artistId});let t=F(""),l=F(P({name:"",date:""}));switch(e.request.state.value){case"active":y(t,"Active"),y(l,P(e.request.state.progress.find(p=>p.date!==null)));break;case"cancelled":y(t,"Cancelled");break;case"finished":y(t,"Finished");break;case"pending":y(t,"Pending Acceptance");break;case"rejected":y(t,"Rejected");break;default:y(t,"Pending Acceptance");break}var o=Re(),d=s(o),u=s(d),R=s(u),I=s(R,!0);a(R);var b=i(R,2),k=s(b,!0);a(b),a(u),a(d);var m=i(d),V=s(m,!0);a(m);var _=i(m),j=s(_,!0);x(()=>v(j,new Date(e.request.deadline).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}))),a(_);var g=i(_),S=s(g),q=s(S);Q(q,()=>B(t)==="Active",p=>{var c=G();x(()=>v(c,B(l).name)),f(p,c)},p=>{var c=G();x(()=>v(c,B(t))),f(p,c)}),a(S),a(g);var E=i(g),N=s(E);N.__click=[he,e],a(E),a(o),x(()=>{v(I,e.request.service.title),v(k,r==null?void 0:r.displayName),v(V,e.request.type)}),f(n,o),C()}J(["click"]);var De=h('<table class="-mt-4 w-full border-collapse text-left"><thead><tr class="border-b text-sm font-medium text-gray-700"><th class="px-4 py-2">SERVICE</th><th class="px-4 py-2">TYPE</th><th class="px-4 py-2">DEADLINE</th><th class="px-4 py-2">STATE</th><th class="px-4 py-2">ACTIONS</th></tr></thead><tbody></tbody></table>');function T(n,e){A(e,!0);const r=e.props.requestDB,t=e.props.openRequest;var l=De(),o=i(s(l));Y(o,21,()=>r,z,(d,u)=>{we(d,{get request(){return B(u)},openRequest:t})}),a(o),a(l),f(n,l),C()}function Me(n,e){A(e,!0);let r=F(P([]));e.commissionOrOrder?y(r,P([{label:`New Requests (${e.requestDB.filter(t=>t.state.value==="pending").length})`,value:1,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="pending"),openRequest:e.openRequest}},{label:`Active (${e.requestDB.filter(t=>t.state.value==="active").length})`,value:2,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="active"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:3,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="cancelled"||t.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:4,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="finished"),openRequest:e.openRequest}}])):y(r,P([{label:"Active",value:1,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="active"||t.state.value==="pending"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:2,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="cancelled"||t.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:3,component:T,props:{requestDB:e.requestDB.filter(t=>t.state.value==="finished"),openRequest:e.openRequest}}])),W(n,{get items(){return B(r)}}),C()}export{Me as C,Fe as V};
