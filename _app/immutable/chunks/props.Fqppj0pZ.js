import{D as q,F as w,L as B,P as C,G as y,k as l,H as M,u as g,I as U,R as x,J as A,K as G,M as H,N as Y,m as T,o as $,O as D,Q as z,T as J}from"./runtime.Bg64Jrmk.js";import{p as K}from"./proxy.BIPFQ7So.js";import{c as Q}from"./store.44LE1Vg0.js";import{l as V}from"./index.BFqC5wTN.js";function L(a){for(var r=D,t=D;r!==null&&!(r.f&(U|x));)r=r.parent;try{return A(r),a()}finally{A(t)}}function k(a,r,t,v){var h;var E=(t&G)!==0,d=!V||(t&H)!==0,R=(t&Y)!==0,F=(t&z)!==0,S=!1,u;R?[u,S]=Q(()=>a[r]):u=a[r];var s=(h=q(a,r))==null?void 0:h.set,n=v,c=!0,o=!1,p=()=>(o=!0,c&&(c=!1,F?n=g(v):n=v),n);u===void 0&&v!==void 0&&(s&&d&&w(),u=p(),s&&s(u));var f;if(d)f=()=>{var e=a[r];return e===void 0?p():(c=!0,o=!1,e)};else{var O=L(()=>(E?T:$)(()=>a[r]));O.f|=B,f=()=>{var e=l(O);return e!==void 0&&(n=void 0),e===void 0?n:e}}if(!(t&C))return f;if(s){var N=a.$$legacy;return function(e,i){return arguments.length>0?((!d||!i||N||S)&&s(i?f():e),e):f()}}var m=!1,b=!1,P=J(u),_=L(()=>T(()=>{var e=f(),i=l(P);return m?(m=!1,b=!0,i):(b=!1,P.v=e)}));return E||(_.equals=y),function(e,i){if(arguments.length>0){const I=i?l(_):d&&R?K(e):e;return _.equals(I)||(m=!0,M(P,I),o&&n!==void 0&&(n=I),g(()=>l(_))),e}return l(_)}}export{k as p};
