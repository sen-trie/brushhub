import{g as q,f as y,L as C,P as F,s as N,j as l,k as x,u as O,B as U,R as M,l as A,m as Y,n as $,o as j,t as L,v as z,w as T,x as G,y as H}from"./runtime.D41qTSeh.js";import{p as V}from"./if.C0zgFsmD.js";import{c as Z}from"./store.CMaJaUna.js";import{l as J}from"./index.BFqC5wTN.js";function w(a){for(var r=T,t=T;r!==null&&!(r.f&(U|M));)r=r.parent;try{return A(r),a()}finally{A(t)}}function k(a,r,t,v){var h;var I=(t&Y)!==0,d=!J||(t&$)!==0,R=(t&j)!==0,B=(t&G)!==0,S=!1,f;R?[f,S]=Z(()=>a[r]):f=a[r];var s=(h=q(a,r))==null?void 0:h.set,n=v,c=!0,o=!1,p=()=>(o=!0,c&&(c=!1,B?n=O(v):n=v),n);f===void 0&&v!==void 0&&(s&&d&&y(),f=p(),s&&s(f));var u;if(d)u=()=>{var e=a[r];return e===void 0?p():(c=!0,o=!1,e)};else{var b=w(()=>(I?L:z)(()=>a[r]));b.f|=C,u=()=>{var e=l(b);return e!==void 0&&(n=void 0),e===void 0?n:e}}if(!(t&F))return u;if(s){var D=a.$$legacy;return function(e,i){return arguments.length>0?((!d||!i||D||S)&&s(i?u():e),e):u()}}var m=!1,g=!1,P=H(f),_=w(()=>L(()=>{var e=u(),i=l(P);return m?(m=!1,g=!0,i):(g=!1,P.v=e)}));return I||(_.equals=N),function(e,i){if(arguments.length>0){const E=i?l(_):d&&R?V(e):e;return _.equals(E)||(m=!0,x(P,E),o&&n!==void 0&&(n=E),O(()=>l(_))),e}return l(_)}}export{k as p};
