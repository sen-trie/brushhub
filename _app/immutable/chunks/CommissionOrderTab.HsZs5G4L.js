import{a as c,t as m,r as re,s as o,d as ee,e as Z}from"./disclose-version.BE_RHt7t.js";import{p as O,s as d,j as te,a as U,c as a,r as t,t as x,g as D,e as ie,b as H,d as h}from"./runtime.CN-Xrd-W.js";import{i as L}from"./if.DakFUcz9.js";import{s as le}from"./class.YwXVpuit.js";import{s as de,p as J,a as ne}from"./props.CZekZOSG.js";import{s as ve,d as ce,p as K}from"./db.Big_RLJE.js";import{T as ae}from"./Tabs.DLdz4IgS.js";import{M as oe}from"./Milestone.x7XacD8O.js";import{e as Q,i as W}from"./each.-eFyfI3H.js";import{d as ue,c as me,n as fe}from"./util.Nw9DTvEX.js";import{B as pe}from"./BackButtonArrow.HdpGkoZF.js";import{p as _e}from"./stores.DK__fOti.js";import{p as Y}from"./proxy.D0RktEAV.js";var be=m('<h2 class="text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm text-gray-500">* Your money will be held and paid to the artist as per the completion of milestones.</p> <div class="overflow-x-auto"><!></div>',1);function xe(n,e){O(e,!0);const r=e.props.request;var l=be(),i=d(te(l),4),s=a(i);oe(s,{get selectedService(){return r.service},get currentService(){return r.state}}),t(i),c(n,l),U()}var qe=m('<span class="font-medium "> </span>'),ge=m("<p>No extras selected.</p>"),ye=m('<span class="font-medium ">Commercial Use Allowed</span>'),he=m('<span class="font-medium "> </span>'),we=m('<div class="flex justify-between"><span class="font-medium ">Add-in Services:</span> <div class="flex flex-col text-right"><!> <!></div></div>'),Re=m('<img alt="Reference" class="h-32 w-full rounded-md border object-cover">'),De=m(`<div class="view-summary"><div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-6"><div><div class="mb-4 flex justify-between"><span class="font-medium ">Type:</span> <span class="font-medium "> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium ">Extras:</span> <div class="text-right"></div></div> <div class="mb-4"><span class="block font-medium ">Brief:</span> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md entry min-h-32
                           p-2 shadow-sm  sm:text-sm"></textarea></div> <div class="mb-4 flex justify-between"><span class="font-medium ">Deadline:</span> <span class="font-medium text-"> </span></div> <!></div> <div><span class="mb-2 block font-medium ">References:</span> <div class="grid grid-cols-3 gap-2"></div></div></div> <div class="mb-4 flex justify-end"><span class="page-title pr-4"> </span></div></div>`);function $(n,e){O(e,!0);const r=e.props.request,l=r.service,i=r;var s=De(),v=a(s),u=a(v),p=a(u),P=d(a(p),2),k=a(P,!0);t(P),t(p);var B=d(p,2),q=d(a(B),2);Q(q,21,()=>r.extras,W,(R,f)=>{var b=qe(),T=a(b,!0);t(b),x(()=>o(T,D(f))),c(R,b)},R=>{var f=ge();c(R,f)}),t(q),t(B);var V=d(B,2),w=d(a(V),2);re(w),t(V);var j=d(V,2),g=d(a(j),2),S=a(g);x(()=>o(S,`${i.deadline??""}
                    [${ue(i.deadline)??""}]`)),t(g),t(j);var C=d(j,2);L(C,()=>i.commercialUse||i.fastDelivery,R=>{var f=we(),b=d(a(f),2),T=a(b);L(T,()=>i.commercialUse,F=>{var A=ye();c(F,A)});var z=d(T,2);L(z,()=>i.fastDelivery,F=>{var A=he(),G=a(A);t(A),x(()=>o(G,`Fast Delivery (${l.fastDelivery.duration??""} ${l.fastDelivery.unit??""})`)),c(F,A)}),t(b),t(f),c(R,f)}),t(u);var N=d(u,2),E=d(a(N),2);Q(E,21,()=>i.images,W,(R,f)=>{var b=Re();x(()=>ve(b,"src",D(f))),c(R,b)}),t(E),t(N),t(v);var y=d(v,2),_=a(y),M=a(_);x(()=>o(M,`Net Total: ${me(i.price)??""}`)),t(_),t(y),t(s),x(()=>{o(k,r.type),ce(w,`${i.brief??""}
                `)}),c(n,s),U()}var ke=(n,e,r,l,i)=>fe(`./profile/${e()?r==null?void 0:r.username:l==null?void 0:l.username}`,i().url.pathname),Be=(n,e,r)=>{e()(!1,r.request),r.closeRequest()},je=(n,e,r)=>{e()(!0,r.request),r.closeRequest()},Se=m('<!> <div class="flex w-full justify-end space-x-2"><button class="discard-button">Reject</button> <button class="save-button">Accept</button></div>',1),Ee=m(`<div class="fixed inset-0 z-50 overflow-y-auto min-h-full"><div class="h-full relative !bg-gray-100 dark:!bg-stone-900"><div class="mb-4 flex w-full justify-between border-b-2 
            pt-4 pb-2 colour-border px-6 sm:px-6 md:px-8 lg:px-10"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16 !bg-gray-100 dark:!bg-stone-900 pb-6"><div class="card-container"><div class="flex mb-4 justify-between items-center"><div class="flex flex-col items-start"><h1 class="page-title"> </h1> <button class="text-l underline"> </button></div> <div><p> </p></div></div> <div class="sm:px-4"><!></div></div></div></div></div>`);function Qe(n,e){O(e,!0);const r=de(),l=()=>ne(_e,"$page",r);let i=J(e,"artistView",3,!1),s=J(e,"editEntry",3,()=>{});const v=K("user",{},{id:e.request.artistId}),u=K("user",{},{id:e.request.customerId}),p=i()&&e.request.state.value==="pending";let P=[{label:"Progress",value:1,component:xe,props:{request:e.request}},{label:"Request Summary",value:2,component:$,props:{request:e.request}}];var k=Ee(),B=a(k),q=a(B),V=a(q);pe(V,{get closeEdit(){return e.closeRequest},buttonText:"View Commission Request"}),t(q);var w=d(q,2),j=a(w),g=a(j),S=a(g),C=a(S),N=a(C,!0);t(C);var E=d(C,2);E.__click=[ke,i,u,v,l];var y=a(E,!0);t(E),t(S);var _=d(S,2),M=a(_),R=a(M);t(M),t(_),t(g);var f=d(g,2),b=a(f);L(b,()=>!p,T=>{ae(T,{items:P})},T=>{var z=Se(),F=te(z),A=ie(()=>({request:e.request}));$(F,{get props(){return D(A)}});var G=d(F,2),X=a(G);X.__click=[Be,s,e];var se=d(X,2);se.__click=[je,s,e],t(G),c(T,z)}),t(f),t(j),t(w),t(B),t(k),x(()=>{o(N,e.request.service.title),o(y,i()?`Requested by: ${u==null?void 0:u.displayName}`:`Service by: ${v==null?void 0:v.displayName}`),le(M,`text-lg text-center
                                ${(e.request.state.value==="active"?"!text-green-500":"")??""} 
                                ${(e.request.state.value==="rejected"?"!text-red-500":"")??""}
                                ${(e.request.state.value==="pending"?"!text-yellow-500":"")??""}
                        mr-4`),o(R,`State:
                            ${(e.request.state.value==="pending"?"Pending":e.request.state.value==="active"?"In Progress":e.request.state.value==="rejected"?"Rejected":e.request.state.value==="completed"?"Completed":"Cancelled")??""}`)}),c(n,k),U()}ee(["click"]);var Te=(n,e)=>{e.openRequest(e.request)},Ve=m('<tr class="border-b text-sm"><td class="px-4 py-2"><div class="flex flex-col"><span class="font-semibold"> </span> <span class="text-xs"> </span></div></td><td class="px-4 py-2"> </td><td class="px-4 py-2"> </td><td class="px-4 py-2"><span class="font-semibold"><!></span></td><td class="px-4 py-2"><button class="confirm-button rounded-full">View Details</button></td></tr>');function Ce(n,e){O(e,!0),J(e,"editEntry",3,()=>{});const r=K("user",{},{id:e.request.artistId});let l=H(""),i=H(Y({name:"",date:""}));switch(e.request.state.value){case"active":h(l,"Active"),h(i,Y(e.request.state.progress.find(y=>y.date!==null))),h(i,D(i)??e.request.state.progress[0]);break;case"cancelled":h(l,"Cancelled");break;case"finished":h(l,"Finished");break;case"pending":h(l,"Pending Acceptance");break;case"rejected":h(l,"Rejected");break;default:h(l,"Pending Acceptance");break}var s=Ve(),v=a(s),u=a(v),p=a(u),P=a(p,!0);t(p);var k=d(p,2),B=a(k,!0);t(k),t(u),t(v);var q=d(v),V=a(q,!0);t(q);var w=d(q),j=a(w,!0);x(()=>o(j,new Date(e.request.deadline).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}))),t(w);var g=d(w),S=a(g),C=a(S);L(C,()=>D(l)==="Active",y=>{var _=Z();x(()=>o(_,D(i).name)),c(y,_)},y=>{var _=Z();x(()=>o(_,D(l))),c(y,_)}),t(S),t(g);var N=d(g),E=a(N);E.__click=[Te,e],t(N),t(s),x(()=>{o(P,e.request.service.title),o(B,r==null?void 0:r.displayName),o(V,e.request.type)}),c(n,s),U()}ee(["click"]);var Ne=m('<div class="overflow-x-auto -mt-4 whitespace-nowrap"><table class="border-collapse text-left w-full"><thead><tr class="border-b text-sm font-medium"><th class="px-4 py-2 w-4/12">SERVICE</th><th class="px-4 py-2 w-2/12">TYPE</th><th class="px-4 py-2 w-2/12">DEADLINE</th><th class="px-4 py-2 w-2/12">STATE</th><th class="px-4 py-2 w-2/12">ACTIONS</th></tr></thead><tbody></tbody></table></div>');function I(n,e){O(e,!0);const r=e.props.requestDB,l=e.props.openRequest;var i=Ne(),s=a(i),v=d(a(s));Q(v,21,()=>r,W,(u,p)=>{Ce(u,{get request(){return D(p)},openRequest:l})}),t(v),t(s),t(i),c(n,i),U()}var Ae=m('<div class="min-h-96"><!></div>');function We(n,e){O(e,!0);let r=H(Y([]));e.commissionOrOrder?h(r,Y([{label:`New Requests (${e.requestDB.filter(s=>s.state.value==="pending").length})`,value:1,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="pending"),openRequest:e.openRequest}},{label:`Active (${e.requestDB.filter(s=>s.state.value==="active").length})`,value:2,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:3,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:4,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest}}])):h(r,Y([{label:"Active",value:1,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"||s.state.value==="pending"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:2,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:3,component:I,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest}}]));var l=Ae(),i=a(l);ae(i,{get items(){return D(r)}}),t(l),c(n,l),U()}export{We as C,Qe as V};
