import{a as m,t as _,r as re,s as o,d as X,e as Q}from"./disclose-version.bD0kEr0Y.js";import{p as N,s as l,j as Z,a as I,t as b,c as a,r as t,n as ie,g as j,e as le,b as M,d as R}from"./runtime.NkCrfN_B.js";import{i as $}from"./if.BQ7NR3mh.js";import{s as de}from"./class.rDyswWNQ.js";import{p as L}from"./props.CoMpn4C5.js";import{s as ne,a as ve}from"./store.CGgCGTgH.js";import{s as ce,d as ue,p as Y}from"./db.SHkFEn0i.js";import{T as ee}from"./Tabs.DTOrEQ8b.js";import{M as oe}from"./Milestone.BWXUno7V.js";import{e as z,i as U}from"./each.CcwbMJOJ.js";import{d as me,c as pe,n as fe}from"./util.DdrE0CmF.js";import{B as xe}from"./BackButtonArrow.ChllQ7cH.js";import{p as be}from"./stores.CZoGQJ3E.js";import{p as A}from"./proxy.B8o5R4Xe.js";var _e=_('<h2 class="text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm text-gray-500">* Your money will be held and paid to the artist as per the completion of milestones.</p> <!>',1);function ge(n,e){N(e,!0);const r=e.props.request;var i=_e(),d=l(Z(i),4);oe(d,{get selectedService(){return r.service},get currentService(){return r.state}}),m(n,i),I()}var qe=_('<span class="font-medium text-gray-900"> </span>'),ye=_('<p class="text-gray-500">No extras selected.</p>'),he=_('<img alt="Reference" class="h-32 w-full rounded-md border object-cover">'),we=_('<div><div class="grid grid-cols-2 gap-6"><div><div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Type:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Extras:</span> <div class="text-right"></div></div> <div class="mb-4"><span class="block font-medium text-gray-700">Brief:</span> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm focus:border-gray-300 focus:ring-0 sm:text-sm"></textarea></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Deadline:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Add-in Services:</span></div></div> <div><span class="mb-2 block font-medium text-gray-700">References:</span> <div class="grid grid-cols-3 gap-2"></div></div></div> <div class="mb-4 flex justify-end"><span class="page-title pr-4"> </span></div></div>');function W(n,e){N(e,!0);const r=e.props.request;r.service;const i=r;var d=we(),s=a(d),v=a(s),u=a(v),f=l(a(u),2),P=a(f,!0);t(f),t(u);var x=l(u,2),S=l(a(x),2);z(S,21,()=>r.extras,U,(c,w)=>{var k=qe(),O=a(k,!0);t(k),b(()=>o(O,j(w))),m(c,k)},c=>{var w=ye();m(c,w)}),t(S),t(x);var p=l(x,2),C=l(a(p),2);re(C),t(p);var g=l(p,2),E=l(a(g),2),q=a(E);b(()=>o(q,`${i.deadline??""}
                    [${me(i.deadline)??""}]`)),t(E),t(g),ie(2),t(v);var y=l(v,2),D=l(a(y),2);z(D,21,()=>i.images,U,(c,w)=>{var k=he();b(()=>ce(k,"src",j(w))),m(c,k)}),t(D),t(y),t(s);var T=l(s,2),B=a(T),h=a(B);b(()=>o(h,`Net Total: ${pe(i.price)??""}`)),t(B),t(T),t(d),b(()=>{o(P,r.type),ue(C,`${i.brief??""}
                `)}),m(n,d),I()}var Re=(n,e,r,i,d)=>fe(`./profile/${e()?r==null?void 0:r.username:i==null?void 0:i.username}`,d().url.pathname),De=(n,e,r)=>{e()(!1,r.request),r.closeRequest()},Be=(n,e,r)=>{e()(!0,r.request),r.closeRequest()},ke=_('<!> <div class="flex w-full justify-end space-x-2"><button class="discard-button">Reject</button> <button class="save-button">Accept</button></div>',1),je=_(`<div class="fixed inset-0 z-50 overflow-y-auto bg-white"><div class="relative p-6"><div class="mb-4 flex w-full justify-between border-b-2 p-4 px-2
            pt-0 sm:px-4 md:px-6 lg:px-8"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16"><div class="card-container"><div class="flex mb-4 justify-between items-center"><div class="flex flex-col items-start"><h1 class="page-title"> </h1> <button class="text-l text-gray-500 underline"> </button></div> <div><p> </p></div></div> <div class="px-4"><!></div></div></div></div></div>`);function Ke(n,e){N(e,!0);const r=ne(),i=()=>ve(be,"$page",r);let d=L(e,"artistView",3,!1),s=L(e,"editEntry",3,()=>{});const v=Y("user",{},{id:e.request.artistId}),u=Y("user",{},{id:e.request.customerId}),f=d()&&e.request.state.value==="pending";let P=[{label:"Progress",value:1,component:ge,props:{request:e.request}},{label:"Request Summary",value:2,component:W,props:{request:e.request}}];var x=je(),S=a(x),p=a(S),C=a(p);xe(C,{get closeEdit(){return e.closeRequest},buttonText:"View Commission Request"}),t(p);var g=l(p,2),E=a(g),q=a(E),y=a(q),D=a(y),T=a(D,!0);t(D);var B=l(D,2);B.__click=[Re,d,u,v,i];var h=a(B,!0);t(B),t(y);var c=l(y,2),w=a(c),k=a(w);t(w),t(c),t(q);var O=l(q,2),te=a(O);$(te,()=>!f,F=>{ee(F,{items:P})},F=>{var G=ke(),H=Z(G),ae=le(()=>({request:e.request}));W(H,{get props(){return j(ae)}});var J=l(H,2),K=a(J);K.__click=[De,s,e];var se=l(K,2);se.__click=[Be,s,e],t(J),m(F,G)}),t(O),t(E),t(g),t(S),t(x),b(()=>{o(T,e.request.service.title),o(h,d()?`Requested by: ${u==null?void 0:u.displayName}`:`Service by: ${v==null?void 0:v.displayName}`),de(w,`text-lg text-gray-500 
                                ${(e.request.state.value==="active"?"text-green-500":"")??""} 
                                ${(e.request.state.value==="rejected"?"text-red-500":"")??""}
                                ${(e.request.state.value==="pending"?"text-yellow-500":"")??""}
                        mr-4`),o(k,`State:
                            ${(e.request.state.value==="pending"?"Pending":e.request.state.value==="active"?"In Progress":e.request.state.value==="rejected"?"Rejected":e.request.state.value==="completed"?"Completed":"Cancelled")??""}`)}),m(n,x),I()}X(["click"]);var Se=(n,e)=>{e.openRequest(e.request)},Ee=_('<tr class="border-b text-sm"><td class="px-4 py-2"><div class="flex flex-col"><span class="font-semibold"> </span> <span class="text-xs text-gray-500"> </span></div></td><td class="px-4 py-2"> </td><td class="px-4 py-2"> </td><td class="px-4 py-2"><span class="font-semibold"><!></span></td><td class="px-4 py-2"><button class="apply-button rounded-full bg-orange-500 p-3 px-6 text-white">View Details</button></td></tr>');function Te(n,e){N(e,!0),L(e,"editEntry",3,()=>{});const r=Y("user",{},{id:e.request.artistId});let i=M(""),d=M(A({name:"",date:""}));switch(e.request.state.value){case"active":R(i,"Active"),R(d,A(e.request.state.progress.find(h=>h.date!==null)));break;case"cancelled":R(i,"Cancelled");break;case"finished":R(i,"Finished");break;case"pending":R(i,"Pending Acceptance");break;case"rejected":R(i,"Rejected");break;default:R(i,"Pending Acceptance");break}var s=Ee(),v=a(s),u=a(v),f=a(u),P=a(f,!0);t(f);var x=l(f,2),S=a(x,!0);t(x),t(u),t(v);var p=l(v),C=a(p,!0);t(p);var g=l(p),E=a(g,!0);b(()=>o(E,new Date(e.request.deadline).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}))),t(g);var q=l(g),y=a(q),D=a(y);$(D,()=>j(i)==="Active",h=>{var c=Q();b(()=>o(c,j(d).name)),m(h,c)},h=>{var c=Q();b(()=>o(c,j(i))),m(h,c)}),t(y),t(q);var T=l(q),B=a(T);B.__click=[Se,e],t(T),t(s),b(()=>{o(P,e.request.service.title),o(S,r==null?void 0:r.displayName),o(C,e.request.type)}),m(n,s),I()}X(["click"]);var Ve=_('<div class="overflow-x-auto -mt-4"><table class="border-collapse text-left"><thead><tr class="border-b text-sm font-medium text-gray-700"><th class="px-4 py-2 w-4/12">SERVICE</th><th class="px-4 py-2 w-2/12">TYPE</th><th class="px-4 py-2 w-2/12">DEADLINE</th><th class="px-4 py-2 w-2/12">STATE</th><th class="px-4 py-2 w-2/12">ACTIONS</th></tr></thead><tbody></tbody></table></div>');function V(n,e){N(e,!0);const r=e.props.requestDB,i=e.props.openRequest;var d=Ve(),s=a(d),v=l(a(s));z(v,21,()=>r,U,(u,f)=>{Te(u,{get request(){return j(f)},openRequest:i})}),t(v),t(s),t(d),m(n,d),I()}var Ce=_('<div class="min-h-96"><!></div>');function Qe(n,e){N(e,!0);let r=M(A([]));e.commissionOrOrder?R(r,A([{label:`New Requests (${e.requestDB.filter(s=>s.state.value==="pending").length})`,value:1,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="pending"),openRequest:e.openRequest}},{label:`Active (${e.requestDB.filter(s=>s.state.value==="active").length})`,value:2,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:3,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:4,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest}}])):R(r,A([{label:"Active",value:1,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"||s.state.value==="pending"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:2,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:3,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest}}]));var i=Ce(),d=a(i);ee(d,{get items(){return j(r)}}),t(i),m(n,i),I()}export{Qe as C,Ke as V};
