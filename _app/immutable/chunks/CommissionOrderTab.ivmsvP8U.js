import{a as m,t as b,r as se,s as o,d as X,b as Q}from"./disclose-version.BEEGi2oI.js";import{p as N,s as l,f as Z,a as I,t as x,c as a,r as t,n as re,g as j,e as ie,b as M,d as w}from"./runtime.C-s0Hq_6.js";import{i as $}from"./if.DN0dI3wX.js";import{s as le}from"./class.Bsjm69_Q.js";import{p as L}from"./props.BcShvcsW.js";import{s as ne,a as de}from"./store.QkJGiwQc.js";import{s as ve,d as ue,p as Y}from"./db.BaQdwY0M.js";import{T as ee}from"./Tabs.BxN9-eAX.js";import{M as ce}from"./Milestone.3yFcOBJt.js";import{e as z,i as U}from"./each.Bjkk2cOk.js";import{d as oe,c as me,n as pe}from"./util.3lGB5WEb.js";import{B as fe}from"./BackButtonArrow.oXT4XZSs.js";import{p as xe}from"./stores.Dg8cbDtW.js";import{p as A}from"./proxy.CWL-fuXM.js";var be=b('<h2 class="text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm text-gray-500">* Your money will be held and paid to the artist as per the completion of milestones.</p> <!>',1);function ge(d,e){N(e,!0);const r=e.props.request;var i=be(),n=l(Z(i),4);ce(n,{get selectedService(){return r.service},get currentService(){return r.state}}),m(d,i),I()}var _e=b('<span class="font-medium text-gray-900"> </span>'),qe=b('<p class="text-gray-500">No extras selected.</p>'),ye=b('<img alt="Reference" class="h-32 w-full rounded-md border object-cover">'),he=b('<div><div class="grid grid-cols-2 gap-6"><div><div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Type:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Extras:</span> <div class="text-right"></div></div> <div class="mb-4"><span class="block font-medium text-gray-700">Brief:</span> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md border-gray-300 bg-gray-100 p-2 shadow-sm focus:border-gray-300 focus:ring-0 sm:text-sm"></textarea></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Deadline:</span> <span class="font-medium text-gray-900"> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium text-gray-700">Add-in Services:</span></div></div> <div><span class="mb-2 block font-medium text-gray-700">References:</span> <div class="grid grid-cols-3 gap-2"></div></div></div> <div class="mb-4 flex justify-end"><span class="page-title pr-4"> </span></div></div>');function W(d,e){N(e,!0);const r=e.props.request;r.service;const i=r;var n=he(),s=a(n),v=a(s),c=a(v),R=l(a(c),2),P=a(R,!0);t(R),t(c);var f=l(c,2),S=l(a(f),2);z(S,21,()=>r.extras,U,(u,h)=>{var k=_e(),O=a(k,!0);t(k),x(()=>o(O,j(h))),m(u,k)},u=>{var h=qe();m(u,h)}),t(S),t(f);var p=l(f,2),C=l(a(p),2);se(C),t(p);var g=l(p,2),E=l(a(g),2),_=a(E);x(()=>o(_,`${i.deadline??""}
                    [${oe(i.deadline)??""}]`)),t(E),t(g),re(2),t(v);var q=l(v,2),D=l(a(q),2);z(D,21,()=>i.images,U,(u,h)=>{var k=ye();x(()=>ve(k,"src",j(h))),m(u,k)}),t(D),t(q),t(s);var T=l(s,2),B=a(T),y=a(B);x(()=>o(y,`Net Total: ${me(i.price)??""}`)),t(B),t(T),t(n),x(()=>{o(P,r.type),ue(C,`${i.brief??""}
                `)}),m(d,n),I()}var we=(d,e,r,i,n)=>pe(`./profile/${e()?r==null?void 0:r.username:i==null?void 0:i.username}`,n().url.pathname),Re=(d,e,r)=>{e()(!1,r.request),r.closeRequest()},De=(d,e,r)=>{e()(!0,r.request),r.closeRequest()},Be=b('<!> <div class="flex w-full justify-end space-x-2"><button class="discard-button">Reject</button> <button class="save-button">Accept</button></div>',1),ke=b(`<div class="fixed inset-0 z-50 overflow-y-auto bg-white"><div class="relative p-6"><div class="mb-4 flex w-full justify-between border-b-2 p-4 px-2
            pt-0 sm:px-4 md:px-6 lg:px-8"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16"><div class="card-container"><div class="flex mb-4 justify-between items-center"><div class="flex flex-col items-start"><h1 class="page-title"> </h1> <button class="text-l text-gray-500 underline"> </button></div> <div><p> </p></div></div> <!></div></div></div></div>`);function Je(d,e){N(e,!0);const r=ne(),i=()=>de(xe,"$page",r);let n=L(e,"artistView",3,!1),s=L(e,"editEntry",3,()=>{});const v=Y("user",{},{id:e.request.artistId}),c=Y("user",{},{id:e.request.customerId}),R=n()&&e.request.state.value==="pending";let P=[{label:"Progress",value:1,component:ge,props:{request:e.request}},{label:"Request Summary",value:2,component:W,props:{request:e.request}}];var f=ke(),S=a(f),p=a(S),C=a(p);fe(C,{get closeEdit(){return e.closeRequest},buttonText:"View Commission Request"}),t(p);var g=l(p,2),E=a(g),_=a(E),q=a(_),D=a(q),T=a(D,!0);t(D);var B=l(D,2);B.__click=[we,n,c,v,i];var y=a(B,!0);t(B),t(q);var u=l(q,2),h=a(u),k=a(h);t(h),t(u),t(_);var O=l(_,2);$(O,()=>!R,F=>{ee(F,{items:P})},F=>{var G=Be(),H=Z(G),te=ie(()=>({request:e.request}));W(H,{get props(){return j(te)}});var J=l(H,2),K=a(J);K.__click=[Re,s,e];var ae=l(K,2);ae.__click=[De,s,e],t(J),m(F,G)}),t(E),t(g),t(S),t(f),x(()=>{o(T,e.request.service.title),o(y,n()?`Requested by: ${c==null?void 0:c.displayName}`:`Service by: ${v==null?void 0:v.displayName}`),le(h,`text-lg text-gray-500 
                                ${(e.request.state.value==="active"?"text-green-500":"")??""} 
                                ${(e.request.state.value==="rejected"?"text-red-500":"")??""}
                                ${(e.request.state.value==="pending"?"text-yellow-500":"")??""}
                        mr-4`),o(k,`State:
                            ${(e.request.state.value==="pending"?"Pending":e.request.state.value==="active"?"In Progress":e.request.state.value==="rejected"?"Rejected":e.request.state.value==="completed"?"Completed":"Cancelled")??""}`)}),m(d,f),I()}X(["click"]);var je=(d,e)=>{e.openRequest(e.request)},Se=b('<tr class="border-b text-sm"><td class="px-4 py-2"><div class="flex flex-col"><span class="font-semibold"> </span> <span class="text-xs text-gray-500"> </span></div></td><td class="px-4 py-2"> </td><td class="px-4 py-2"> </td><td class="px-4 py-2"><span class="font-semibold"><!></span></td><td class="px-4 py-2"><button class="apply-button rounded-full bg-orange-500 p-3 px-6 text-white">View Details</button></td></tr>');function Ee(d,e){N(e,!0),L(e,"editEntry",3,()=>{});const r=Y("user",{},{id:e.request.artistId});let i=M(""),n=M(A({name:"",date:""}));switch(e.request.state.value){case"active":w(i,"Active"),w(n,A(e.request.state.progress.find(y=>y.date!==null)));break;case"cancelled":w(i,"Cancelled");break;case"finished":w(i,"Finished");break;case"pending":w(i,"Pending Acceptance");break;case"rejected":w(i,"Rejected");break;default:w(i,"Pending Acceptance");break}var s=Se(),v=a(s),c=a(v),R=a(c),P=a(R,!0);t(R);var f=l(R,2),S=a(f,!0);t(f),t(c),t(v);var p=l(v),C=a(p,!0);t(p);var g=l(p),E=a(g,!0);x(()=>o(E,new Date(e.request.deadline).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}))),t(g);var _=l(g),q=a(_),D=a(q);$(D,()=>j(i)==="Active",y=>{var u=Q();x(()=>o(u,j(n).name)),m(y,u)},y=>{var u=Q();x(()=>o(u,j(i))),m(y,u)}),t(q),t(_);var T=l(_),B=a(T);B.__click=[je,e],t(T),t(s),x(()=>{o(P,e.request.service.title),o(S,r==null?void 0:r.displayName),o(C,e.request.type)}),m(d,s),I()}X(["click"]);var Te=b('<table class="-mt-4 w-full border-collapse text-left"><thead><tr class="border-b text-sm font-medium text-gray-700"><th class="px-4 py-2 w-4/12">SERVICE</th><th class="px-4 py-2 w-2/12">TYPE</th><th class="px-4 py-2 w-2/12">DEADLINE</th><th class="px-4 py-2 w-2/12">STATE</th><th class="px-4 py-2 w-2/12">ACTIONS</th></tr></thead><tbody></tbody></table>');function V(d,e){N(e,!0);const r=e.props.requestDB,i=e.props.openRequest;var n=Te(),s=l(a(n));z(s,21,()=>r,U,(v,c)=>{Ee(v,{get request(){return j(c)},openRequest:i})}),t(s),t(n),m(d,n),I()}var Ve=b('<div class="min-h-96"><!></div>');function Ke(d,e){N(e,!0);let r=M(A([]));e.commissionOrOrder?w(r,A([{label:`New Requests (${e.requestDB.filter(s=>s.state.value==="pending").length})`,value:1,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="pending"),openRequest:e.openRequest}},{label:`Active (${e.requestDB.filter(s=>s.state.value==="active").length})`,value:2,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:3,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:4,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest}}])):w(r,A([{label:"Active",value:1,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"||s.state.value==="pending"),openRequest:e.openRequest}},{label:"Cancelled / Rejected",value:2,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest}},{label:"Finished",value:3,component:V,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest}}]));var i=Ve(),n=a(i);ee(n,{get items(){return j(r)}}),t(i),m(d,i),I()}export{Ke as C,Je as V};
