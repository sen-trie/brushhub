import{a as v,t as c,c as re,s as o,r as ie,d as ee,o as X}from"./disclose-version.BdgloYrR.js";import{p as U,s as i,j as Y,t as g,a as L,c as a,r as t,g as h,e as ne,b as W,d as E}from"./runtime.B7jOGP1B.js";import{i as F}from"./if.D5MR8JA_.js";import{s as le}from"./class.DNvQwqW0.js";import{p as Z}from"./props.DJ3gu5vN.js";import{g as te,c as ve,p as G}from"./util.SOMtIajs.js";import{T as ae}from"./Tabs.Bm1ZgGfH.js";import{e as H,i as J}from"./each.CvzG1Lpo.js";import{s as se,b as de}from"./attributes.AO0FC38_.js";import{M as oe}from"./Milestone.BcxWbQGO.js";import{B as ce}from"./BackButtonArrow.BcqMZ_nb.js";import{p as z}from"./proxy.Dai5s8My.js";var ue=c('<p><span class="font-bold"> </span> <span> </span></p> <img alt="Reference" class="h-48 w-48 object-cover colour-border border-2 mb-4 mt-1">',1),me=c("<span>Rejected Commission</span>"),fe=c("<span>Accepted Commission</span>"),pe=c('<h2 class="text-lg font-semibold">Milestones</h2> <p class="mb-6 text-sm sub-heading">* Money will be held and paid to the artist as per the completion of milestones.</p> <div class="overflow-x-auto mb-8"><!></div> <h2 class="text-lg font-semibold mb-1">Progress</h2> <div><!> <p><span class="font-bold"> </span> <!></p></div>',1);function _e(f,e){U(e,!0);const n=e.props.request;var d=pe(),r=i(Y(d),4),s=a(r);oe(s,{get selectedService(){return n.service},get currentService(){return n.state}}),t(r);var u=i(r,4),p=a(u);H(p,17,()=>n.state.progress.toReversed(),J,(b,l)=>{var C=re(),x=Y(C);F(x,()=>h(l).date!==null,k=>{var O=ue(),D=Y(O),S=a(D),A=a(S);t(S);var j=i(S,2),y=a(j);t(j),t(D);var w=i(D,2);g(()=>se(w,"src",te("reference",h(l).sample))),g(()=>{o(A,`${h(l).date??""}:`),o(y,`Completed "${h(l).name??""}"`)}),v(k,O)}),v(b,C)});var m=i(p,2),_=a(m),T=a(_);t(_);var B=i(_,2);F(B,()=>n.state.value==="rejected",b=>{var l=me();v(b,l)},b=>{var l=fe();v(b,l)}),t(m),t(u),g(()=>o(T,`${n.start??""}:`)),v(f,d),L()}var be=c('<span class="font-medium "> </span>'),xe=c("<p>No extras selected.</p>"),qe=c('<span class="font-medium ">+Commercial Use Allowed</span>'),ge=c('<span class="font-medium "> </span>'),he=c('<div class="flex justify-between"><span class="font-medium ">Add-in Services:</span> <div class="flex flex-col text-right"><!> <!></div></div>'),ye=c('<img alt="Reference" class="h-48 w-full object-cover">'),we=c(`<div class="view-summary"><div class="grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-6"><div><div class="mb-4 flex justify-between"><span class="font-medium ">Type:</span> <span class="font-medium "> </span></div> <div class="mb-4 flex justify-between"><span class="font-medium ">Extras:</span> <div class="text-right"></div></div> <div class="mb-4"><span class="block font-medium ">Brief:</span> <textarea readonly="" rows="5" class="mt-1 w-full rounded-md entry min-h-32
                           p-2 shadow-sm  sm:text-sm cursor-text"></textarea></div> <div class="mb-4 flex justify-between"><span class="font-medium ">Deadline:</span> <span class="font-medium text-"> </span></div> <!></div> <div><span class="mb-2 block font-medium ">References:</span> <div class="grid grid-cols-2 md:grid-cols-3 gap-2"></div></div></div> <div class="mb-4 flex justify-end"><span class="page-title pr-4 green-text"> </span></div></div>`);function $(f,e){U(e,!0);const n=e.props.request,d=n.service,r=n;var s=we(),u=a(s),p=a(u),m=a(p),_=i(a(m),2),T=a(_,!0);t(_),t(m);var B=i(m,2),b=i(a(B),2);H(b,21,()=>n.extras,J,(V,q)=>{var R=be(),I=a(R,!0);t(R),g(()=>o(I,h(q))),v(V,R)},V=>{var q=xe();v(V,q)}),t(b),t(B);var l=i(B,2),C=i(a(l),2);ie(C),t(l);var x=i(l,2),k=i(a(x),2),O=a(k,!0);t(k),t(x);var D=i(x,2);F(D,()=>r.commercialUse||r.fastDelivery,V=>{var q=he(),R=i(a(q),2),I=a(R);F(I,()=>r.commercialUse,M=>{var N=qe();v(M,N)});var K=i(I,2);F(K,()=>r.fastDelivery,M=>{var N=ge(),Q=a(N);t(N),g(()=>o(Q,`+Fast Delivery (${d.fastDelivery.duration??""} ${d.fastDelivery.unit??""})`)),v(M,N)}),t(R),t(q),v(V,q)}),t(p);var S=i(p,2),A=i(a(S),2);H(A,21,()=>r.references,J,(V,q)=>{var R=ye();g(()=>se(R,"src",te("reference",h(q)))),v(V,R)}),t(A),t(S),t(u);var j=i(u,2),y=a(j),w=a(y);g(()=>o(w,`Net Total: ${ve(r.price)??""}`)),t(y),t(j),t(s),g(()=>{o(T,n.type),de(C,`${r.brief??""}
                `),o(O,r.deadline)}),v(f,s),L()}var Re=(f,e,n)=>{e()(!1,n.request),n.closeRequest()},Ce=(f,e,n)=>{e()(!0,n.request),n.closeRequest()},De=c('<!> <div class="flex w-full justify-end space-x-2"><button class="discard-button">Reject</button> <button class="save-button">Accept</button></div>',1),je=c(`<div class="fixed inset-0 z-50 overflow-y-auto min-h-full"><div class="h-full relative !bg-gray-100 dark:!bg-stone-900"><div class="mb-4 flex w-full justify-between border-b-2 
            pt-4 pb-2 colour-border px-6 sm:px-6 md:px-8 lg:px-10"><!></div> <div class="px-2 sm:px-6 md:px-10 lg:px-16 !bg-gray-100 dark:!bg-stone-900 pb-6"><div class="card-container"><div class="flex mb-4 justify-between items-center"><div class="flex flex-col items-start"><h1 class="page-title"> </h1> <p class="text-l underline"> </p></div> <div><p> </p></div></div> <div class="sm:px-4"><!></div></div></div></div></div>`);function Ge(f,e){U(e,!0);let n=Z(e,"artistView",3,!1),d=Z(e,"editEntry",3,()=>{});const r=G("user",{},{id:e.request.artistId}),s=G("user",{},{id:e.request.customerId}),u=n()&&e.request.state.value==="pending";let p=[{label:"Progress",value:1,component:_e,props:{request:e.request}},{label:"Request Summary",value:2,component:$,props:{request:e.request}}];var m=je(),_=a(m),T=a(_),B=a(T);ce(B,{get closeEdit(){return e.closeRequest},buttonText:"View Commission Request"}),t(T);var b=i(T,2),l=a(b),C=a(l),x=a(C),k=a(x),O=a(k,!0);t(k);var D=i(k,2),S=a(D,!0);t(D),t(x);var A=i(x,2),j=a(A),y=a(j);t(j),t(A),t(C);var w=i(C,2),V=a(w);F(V,()=>!u,q=>{ae(q,{items:p})},q=>{var R=De(),I=Y(R),K=ne(()=>({request:e.request}));$(I,{get props(){return h(K)}});var M=i(I,2),N=a(M);N.__click=[Re,d,e];var Q=i(N,2);Q.__click=[Ce,d,e],t(M),v(q,R)}),t(w),t(l),t(b),t(_),t(m),g(()=>{o(O,e.request.service.title),o(S,n()?`Requested by: ${s==null?void 0:s.displayName}`:`Service by: ${r==null?void 0:r.displayName}`),le(j,`text-lg text-center
                                ${(e.request.state.value==="active"?"!green-text":"")??""} 
                                ${(e.request.state.value==="rejected"?"!text-red-500":"")??""}
                                ${(e.request.state.value==="pending"?"!text-yellow-500":"")??""}
                        mr-4`),o(y,`State:
                            ${(e.request.state.value==="pending"?"Pending":e.request.state.value==="active"?"In Progress":e.request.state.value==="rejected"?"Rejected":e.request.state.value==="finished"?"Completed":"Cancelled")??""}`)}),v(f,m),L()}ee(["click"]);var Be=(f,e)=>{e.openRequest(e.request)},ke=c('<tr class="border-b text-sm"><td class="px-4 py-2"><div class="flex flex-col"><span class="font-semibold"> </span> <span class="text-xs"> </span></div></td><td class="px-4 py-2"> </td><td class="px-4 py-2"> </td><td class="px-4 py-2"><span class="font-semibold"><!></span></td><td class="px-4 py-2"><button class="confirm-button rounded-full">View Details</button></td></tr>');function Oe(f,e){U(e,!0);const n=G("user",{},{id:e.request.artistId}),d=G("user",{},{id:e.request.customerId});let r=W(""),s=W(z({name:"",date:""}));switch(e.request.state.value){case"active":E(r,"Active"),E(s,z(e.request.state.progress.find(y=>y.date===null))),E(s,h(s)??e.request.state.progress[0]);break;case"cancelled":E(r,"Cancelled");break;case"finished":E(r,"Finished");break;case"pending":E(r,"Pending Acceptance");break;case"rejected":E(r,"Rejected");break;default:E(r,"Pending Acceptance");break}var u=ke(),p=a(u),m=a(p),_=a(m),T=a(_,!0);t(_);var B=i(_,2),b=a(B,!0);t(B),t(m),t(p);var l=i(p),C=a(l,!0);t(l);var x=i(l),k=a(x,!0);g(()=>o(k,new Date(e.request.deadline).toLocaleDateString("en-US",{weekday:"short",day:"2-digit",month:"2-digit",year:"numeric"}))),t(x);var O=i(x),D=a(O),S=a(D);F(S,()=>h(r)==="Active",y=>{var w=X();g(()=>o(w,h(s).name)),v(y,w)},y=>{var w=X();g(()=>o(w,h(r))),v(y,w)}),t(D),t(O);var A=i(O),j=a(A);j.__click=[Be,e],t(A),t(u),g(()=>{o(T,e.request.service.title),o(b,e.artistOrCommissioner?d==null?void 0:d.displayName:n==null?void 0:n.displayName),o(C,e.request.type)}),v(f,u),L()}ee(["click"]);var Se=c('<div class="overflow-x-auto -mt-4 whitespace-nowrap"><table class="border-collapse text-left w-full"><thead><tr class="border-b text-sm font-medium"><th class="px-4 py-2 w-4/12">SERVICE</th><th class="px-4 py-2 w-2/12">TYPE</th><th class="px-4 py-2 w-2/12">DEADLINE</th><th class="px-4 py-2 w-2/12">STATE</th><th class="px-4 py-2 w-2/12">ACTIONS</th></tr></thead><tbody></tbody></table></div>');function P(f,e){U(e,!0);const n=e.props.requestDB,d=e.props.openRequest;var r=Se(),s=a(r),u=i(a(s));H(u,21,()=>n,J,(p,m)=>{Oe(p,{get request(){return h(m)},openRequest:d,get artistOrCommissioner(){return e.props.artistOrCommissioner}})}),t(u),t(s),t(r),v(f,r),L()}var Ae=c('<div class="min-h-96"><!></div>');function He(f,e){U(e,!0);let n=W(z([]));e.commissionOrOrder?E(n,z([{label:`New Requests (${e.requestDB.filter(s=>s.state.value==="pending").length})`,value:1,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="pending"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}},{label:`Active (${e.requestDB.filter(s=>s.state.value==="active").length})`,value:2,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}},{label:"Cancelled / Rejected",value:3,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}},{label:"Finished",value:4,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}}])):E(n,z([{label:"Active",value:1,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="active"||s.state.value==="pending"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}},{label:"Cancelled / Rejected",value:2,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="cancelled"||s.state.value==="rejected"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}},{label:"Finished",value:3,component:P,props:{requestDB:e.requestDB.filter(s=>s.state.value==="finished"),openRequest:e.openRequest,artistOrCommissioner:e.artistOrCommissioner}}]));var d=Ae(),r=a(d);ae(r,{get items(){return h(n)}}),t(d),v(f,d),L()}export{He as C,Ge as V};
