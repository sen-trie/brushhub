import{d as st,c as J,a as o,t as i,s as U}from"./disclose-version.BdgloYrR.js";import{p as ot,j as k,a as lt,g as e,c as l,t as w,s as d,r as n,n as z,d as nt,b as it,e as dt}from"./runtime.B7jOGP1B.js";import{i as c}from"./if.D5MR8JA_.js";import{e as pt,i as ct}from"./each.CvzG1Lpo.js";import{r as vt,s as mt}from"./attributes.AO0FC38_.js";import{b as ut}from"./input.UdPdKhu2.js";import{p as _t}from"./proxy.Dai5s8My.js";import{p as M}from"./props.DJ3gu5vN.js";import{I as ft,E as bt}from"./Icon.kNAjqhQT.js";import{w as ht,c as K,n as N}from"./util.SOMtIajs.js";import{p as O}from"./index.CzGE_6Ex.js";var xt=i('<span class="absolute right-2 top-2 rounded bg-red-600 px-2 py-1 text-xs font-bold text-white">CLOSED</span>'),gt=i('<span class="rounded px-2 py-1 text-xs font-medium yellow-tag">Fast Delivery</span>'),yt=i('<span class="rounded px-2 py-1 text-xs font-medium orange-tag">Commercial Use</span>'),kt=u=>{u.stopPropagation()},wt=i(`<label class="inline-flex items-center cursor-pointer w-full justify-end"><input type="checkbox" class="sr-only peer"> <span class="mr-3 text-sm font-medium"> </span> <div class="relative w-11 h-6 !bg-stone-200 dark:!bg-stone-500 peer-checked:!bg-orange-600
                                    rounded-full peer  peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full
                                    after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:border after:rounded-full after:h-5 after:w-5 after:transition-all
                                    peer-checked:after:!border-white after:!bg-white after:!border-stone-300 
                                    peer-focus:!ring-blue-300
                                    "></div></label>`),Ot=i('<p class="text-sm font-medium text-right w-full sub-heading">All Services Closed</p>'),Ct=i('<div class="mt-4 mr-2"><!></div>'),Dt=(u,s,v)=>s(!1,e(v)),St=i('<button>Unarchive</button> <hr class="my-2">',1),Et=(u,s,v)=>s(!0,e(v)),At=i('<button>Archive</button> <hr class="my-2">',1),It=(u,s,v)=>s.removeEntry(e(v).id),jt=i(`<div class="absolute top-9 right-2 bg-white text-black rounded-sm p-2 px-4 z-20
                                flex flex-col border-2 border-gray-500"><!> <button class="text-red-500">Delete</button></div>`),Pt=i('<div class="absolute top-4 right-4 text-white !bg-stone-600 rounded-full p-1"><!> <!></div>'),Ut=i('<div class="relative service flex flex-col rounded-lg border colour-border p-4 shadow-sm cursor-pointer"><div class="relative w-full"><img alt="Service Thumbnail" class="h-48 w-full rounded-md object-cover"> <!></div> <div class="mt-4 text-left flex-grow"><h4 class="text-lg font-semibold"> </h4> <p class="mt-2 green-text"> </p> <div class="mt-3 flex flex-wrap items-center gap-2"><!> <!></div></div> <!> <!></div>');function Kt(u,s){ot(s,!0);let v=M(s,"viewOnly",3,!0),T=M(s,"currentArtist",3,!1),Q=M(s,"openComm",3,!0),C=it(-1);const R=_=>{_.artistId===O.data.user.id?N(`./manage-services/${O.data.user.username}`,O.url.pathname):N(`./service/${_.id}`,O.url.pathname)},B=(_,t)=>{_===!0?t.state="archived":t.state="published",s.editEntry(t)};var F=J(),W=k(F);pt(W,17,()=>s.serviceDB,ct,(_,t,D)=>{var g=Ut(),X=dt(()=>v()?()=>R(e(t)):()=>s.callback(e(t)));g.__click=function(...a){var r;(r=e(X))==null||r.apply(this,a)};var S=l(g),L=l(S);w(()=>mt(L,"src",ht("thumbnail",e(t).thumbnail)));var Y=d(L,2);c(Y,()=>!e(t).isOpen&&!T(),a=>{var r=xt();o(a,r)}),n(S);var E=d(S,2),A=l(E),Z=l(A,!0);n(A);var I=d(A,2),$=l(I,!0);w(()=>U($,e(t).types.length>0?`${K(Math.min(...e(t).types.map(a=>a.price)))} ~ 
                            ${K(Math.max(...e(t).types.map(a=>a.price)))}`:"Price not set")),n(I);var V=d(I,2),q=l(V);c(q,()=>{var a;return(a=e(t).fastDelivery)==null?void 0:a.enabled},a=>{var r=gt();o(a,r)});var tt=d(q,2);c(tt,()=>{var a;return(a=e(t).commercialUse)==null?void 0:a.enabled},a=>{var r=yt();o(a,r)}),n(V),n(E);var G=d(E,2);c(G,()=>e(t).state==="published"&&!v(),a=>{var r=Ct();r.__click=[kt];var y=l(r);c(y,Q,f=>{var p=wt(),m=l(p);vt(m);var b=d(m,2),j=l(b,!0);n(b),z(2),n(p),w(()=>U(j,e(t).isOpen?"Open":"Closed")),ut(m,()=>e(t).isOpen,h=>e(t).isOpen=h),o(f,p)},f=>{var p=Ot();o(f,p)}),n(r),o(a,r)});var et=d(G,2);c(et,T,a=>{var r=Pt();r.__click=p=>{p.stopPropagation(),nt(C,_t(D===e(C)?-1:D))};var y=l(r);ft(y,{src:bt,size:"24"});var f=d(y,2);c(f,()=>e(C)===D,p=>{var m=jt(),b=l(m);c(b,()=>e(t).state==="archived",h=>{var x=St(),P=k(x);P.__click=[Dt,B,t],z(2),o(h,x)},h=>{var x=J(),P=k(x);c(P,()=>e(t).state==="published",at=>{var H=At(),rt=k(H);rt.__click=[Et,B,t],z(2),o(at,H)},null,!0),o(h,x)});var j=d(b,2);j.__click=[It,s,t],n(m),o(p,m)}),n(r),o(a,r)}),n(g),w(()=>U(Z,e(t).title)),o(_,g)}),o(u,F),lt()}st(["click"]);export{Kt as S};
