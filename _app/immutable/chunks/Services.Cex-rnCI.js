import{d as rt,c as G,a as l,t as d,s as j}from"./disclose-version.BEEGi2oI.js";import{p as st,f as y,a as lt,g as a,c as o,t as k,s as i,r as n,n as z,d as ot,b as nt,e as it}from"./runtime.C-s0Hq_6.js";import{i as c}from"./if.DN0dI3wX.js";import{e as dt,i as pt}from"./each.Bjkk2cOk.js";import{r as ct,s as vt,w as mt}from"./db.BTs8aeET.js";import{b as ut}from"./input.Asw2ctPt.js";import{p as _t}from"./proxy.CWL-fuXM.js";import{p as H}from"./props.BcShvcsW.js";import{I as ft,E as bt}from"./Icon.AcdLvs0G.js";import{c as J,n as K}from"./util.BSZWymh8.js";import{p as w}from"./index.X1awcDwz.js";var ht=d('<span class="absolute right-2 top-2 rounded bg-red-600 px-2 py-1 text-xs font-bold text-white">CLOSED</span>'),gt=d('<span class="rounded bg-yellow-100 px-2 py-1 text-xs font-medium text-yellow-600">Fast Delivery</span>'),xt=d('<span class="rounded bg-orange-100 px-2 py-1 text-xs font-medium text-orange-600">Commercial</span>'),yt=v=>{v.stopPropagation()},kt=d(`<div class="mt-4 mr-2"><label class="inline-flex items-center cursor-pointer w-full justify-end"><input type="checkbox" class="sr-only peer"> <span class="mr-3 text-sm font-medium"> </span> <div class="relative w-11 h-6 bg-gray-200
                                rounded-full peer dark:bg-gray-300 peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full peer-checked:after:border-white 
                                after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:bg-white after:border-gray-300 
                                after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-gray-600"></div></label></div>`),wt=(v,s,p)=>s(!1,a(p)),Ot=d('<button>Unarchive</button> <hr class="my-2">',1),Dt=(v,s,p)=>s(!0,a(p)),Et=d('<button>Archive</button> <hr class="my-2">',1),St=(v,s,p)=>s.removeEntry(a(p).id),Ct=d(`<div class="absolute top-9 right-2 bg-white text-black rounded-sm p-2 px-4 z-20
                                flex flex-col border-2 border-gray-500"><!> <button class="text-red-500">Delete</button></div>`),It=d('<div class="absolute top-4 right-4 text-white bg-gray-800 rounded-full p-1"><!> <!></div>'),At=d('<div class="relative service flex flex-col rounded-lg border border-gray-200 p-4 shadow-sm cursor-pointer"><div class="relative w-full"><img alt="Service Thumbnail" class="h-48 w-full rounded-md object-cover"> <!></div> <div class="mt-4 text-left flex-grow"><h4 class="text-lg font-semibold"> </h4> <p class="mt-2 text-green-600"> </p> <div class="mt-3 flex flex-wrap items-center gap-2"><!> <!></div></div> <!> <!></div>');function Gt(v,s){st(s,!0);let p=H(s,"viewOnly",3,!0),M=H(s,"currentArtist",3,!1),O=nt(-1);const N=m=>{m.artistId===w.data.user.id?K(`./manage-services/${w.data.user.username}`,w.url.pathname):K(`./service/${m.id}`,w.url.pathname)},T=(m,t)=>{m===!0?t.state="archived":t.state="published",s.editEntry(t)};var U=G(),Q=y(U);dt(Q,17,()=>s.serviceDB,pt,(m,t,D)=>{var g=At(),R=it(()=>p()?()=>N(a(t)):()=>s.callback(a(t)));g.__click=function(...e){var r;(r=a(R))==null||r.apply(this,e)};var E=o(g),B=o(E);k(()=>vt(B,"src",mt("thumbnail",a(t).thumbnail)));var W=i(B,2);c(W,()=>!a(t).isOpen&&!M(),e=>{var r=ht();l(e,r)}),n(E);var S=i(E,2),C=o(S),X=o(C,!0);n(C);var I=i(C,2),Y=o(I,!0);k(()=>j(Y,a(t).types.length>0?`${J(Math.min(...a(t).types.map(e=>e.price)))} ~ 
                            ${J(Math.max(...a(t).types.map(e=>e.price)))}`:"Price not set")),n(I);var F=i(I,2),L=o(F);c(L,()=>{var e;return(e=a(t).fastDelivery)==null?void 0:e.enabled},e=>{var r=gt();l(e,r)});var Z=i(L,2);c(Z,()=>{var e;return(e=a(t).commercialUse)==null?void 0:e.enabled},e=>{var r=xt();l(e,r)}),n(F),n(S);var V=i(S,2);c(V,()=>a(t).state==="published"&&!p(),e=>{var r=kt();r.__click=[yt];var _=o(r),f=o(_);ct(f);var u=i(f,2),b=o(u,!0);n(u),z(2),n(_),n(r),k(()=>j(b,a(t).isOpen?"Open":"Closed")),ut(f,()=>a(t).isOpen,x=>a(t).isOpen=x),l(e,r)});var $=i(V,2);c($,M,e=>{var r=It();r.__click=u=>{u.stopPropagation(),ot(O,_t(D===a(O)?-1:D))};var _=o(r);ft(_,{src:bt,size:"24"});var f=i(_,2);c(f,()=>a(O)===D,u=>{var b=Ct(),x=o(b);c(x,()=>a(t).state==="archived",A=>{var h=Ot(),P=y(h);P.__click=[wt,T,t],z(2),l(A,h)},A=>{var h=G(),P=y(h);c(P,()=>a(t).state==="published",at=>{var q=Et(),et=y(q);et.__click=[Dt,T,t],z(2),l(at,q)},null,!0),l(A,h)});var tt=i(x,2);tt.__click=[St,s,t],n(b),l(u,b)}),n(r),l(e,r)}),n(g),k(()=>j(X,a(t).title)),l(m,g)}),l(v,U),lt()}rt(["click"]);export{Gt as S};
