import{d as rt,c as G,a as o,t as d,s as P}from"./disclose-version.bD0kEr0Y.js";import{p as st,j as y,a as ot,g as e,c as l,t as k,s as i,r as n,n as z,d as lt,b as nt,e as it}from"./runtime.NkCrfN_B.js";import{i as p}from"./if.BQ7NR3mh.js";import{e as dt,i as ct}from"./each.CcwbMJOJ.js";import{r as pt,s as vt,w as ut}from"./db.SHkFEn0i.js";import{b as mt}from"./input.DT_BWzvP.js";import{p as _t}from"./proxy.B8o5R4Xe.js";import{p as H}from"./props.CoMpn4C5.js";import{I as ft,E as bt}from"./Icon.CPTbGq7M.js";import{c as J,n as K}from"./util.DdrE0CmF.js";import{p as w}from"./index.CrZa2Q9e.js";var ht=d('<span class="absolute right-2 top-2 rounded bg-red-600 px-2 py-1 text-xs font-bold text-white">CLOSED</span>'),gt=d('<span class="rounded px-2 py-1 text-xs font-medium yellow-tag">Fast Delivery</span>'),xt=d('<span class="rounded px-2 py-1 text-xs font-medium orange-tag">Commercial</span>'),yt=v=>{v.stopPropagation()},kt=d(`<div class="mt-4 mr-2"><label class="inline-flex items-center cursor-pointer w-full justify-end"><input type="checkbox" class="sr-only peer"> <span class="mr-3 text-sm font-medium"> </span> <div class="relative w-11 h-6 !bg-stone-200 dark:!bg-stone-500 peer-checked:!bg-orange-600
                                rounded-full peer  peer-checked:after:translate-x-full rtl:peer-checked:after:-translate-x-full
                                after:content-[''] after:absolute after:top-[2px] after:start-[2px] after:border after:rounded-full after:h-5 after:w-5 after:transition-all
                                peer-checked:after:!border-white after:!bg-white after:!border-stone-300 
                                peer-focus:!ring-blue-300
                                "></div></label></div>`),wt=(v,s,c)=>s(!1,e(c)),Ot=d('<button>Unarchive</button> <hr class="my-2">',1),Dt=(v,s,c)=>s(!0,e(c)),Et=d('<button>Archive</button> <hr class="my-2">',1),St=(v,s,c)=>s.removeEntry(e(c).id),Ct=d(`<div class="absolute top-9 right-2 bg-white text-black rounded-sm p-2 px-4 z-20
                                flex flex-col border-2 border-gray-500"><!> <button class="text-red-500">Delete</button></div>`),It=d('<div class="absolute top-4 right-4 text-white !bg-gray-800 rounded-full p-1"><!> <!></div>'),jt=d('<div class="relative service flex flex-col rounded-lg border colour-border p-4 shadow-sm cursor-pointer"><div class="relative w-full"><img alt="Service Thumbnail" class="h-48 w-full rounded-md object-cover"> <!></div> <div class="mt-4 text-left flex-grow"><h4 class="text-lg font-semibold"> </h4> <p class="mt-2 text-green-600"> </p> <div class="mt-3 flex flex-wrap items-center gap-2"><!> <!></div></div> <!> <!></div>');function Gt(v,s){st(s,!0);let c=H(s,"viewOnly",3,!0),M=H(s,"currentArtist",3,!1),O=nt(-1);const N=u=>{u.artistId===w.data.user.id?K(`./manage-services/${w.data.user.username}`,w.url.pathname):K(`./service/${u.id}`,w.url.pathname)},T=(u,t)=>{u===!0?t.state="archived":t.state="published",s.editEntry(t)};var U=G(),Q=y(U);dt(Q,17,()=>s.serviceDB,ct,(u,t,D)=>{var g=jt(),R=it(()=>c()?()=>N(e(t)):()=>s.callback(e(t)));g.__click=function(...a){var r;(r=e(R))==null||r.apply(this,a)};var E=l(g),B=l(E);k(()=>vt(B,"src",ut("thumbnail",e(t).thumbnail)));var W=i(B,2);p(W,()=>!e(t).isOpen&&!M(),a=>{var r=ht();o(a,r)}),n(E);var S=i(E,2),C=l(S),X=l(C,!0);n(C);var I=i(C,2),Y=l(I,!0);k(()=>P(Y,e(t).types.length>0?`${J(Math.min(...e(t).types.map(a=>a.price)))} ~ 
                            ${J(Math.max(...e(t).types.map(a=>a.price)))}`:"Price not set")),n(I);var F=i(I,2),L=l(F);p(L,()=>{var a;return(a=e(t).fastDelivery)==null?void 0:a.enabled},a=>{var r=gt();o(a,r)});var Z=i(L,2);p(Z,()=>{var a;return(a=e(t).commercialUse)==null?void 0:a.enabled},a=>{var r=xt();o(a,r)}),n(F),n(S);var V=i(S,2);p(V,()=>e(t).state==="published"&&!c(),a=>{var r=kt();r.__click=[yt];var _=l(r),f=l(_);pt(f);var m=i(f,2),b=l(m,!0);n(m),z(2),n(_),n(r),k(()=>P(b,e(t).isOpen?"Open":"Closed")),mt(f,()=>e(t).isOpen,x=>e(t).isOpen=x),o(a,r)});var $=i(V,2);p($,M,a=>{var r=It();r.__click=m=>{m.stopPropagation(),lt(O,_t(D===e(O)?-1:D))};var _=l(r);ft(_,{src:bt,size:"24"});var f=i(_,2);p(f,()=>e(O)===D,m=>{var b=Ct(),x=l(b);p(x,()=>e(t).state==="archived",j=>{var h=Ot(),A=y(h);A.__click=[wt,T,t],z(2),o(j,h)},j=>{var h=G(),A=y(h);p(A,()=>e(t).state==="published",et=>{var q=Et(),at=y(q);at.__click=[Dt,T,t],z(2),o(et,q)},null,!0),o(j,h)});var tt=i(x,2);tt.__click=[St,s,t],n(b),o(m,b)}),n(r),o(a,r)}),n(g),k(()=>P(X,e(t).title)),o(u,g)}),o(v,U),ot()}rt(["click"]);export{Gt as S};
