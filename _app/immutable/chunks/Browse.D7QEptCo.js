import{d as lt,a as v,t as f,s as p}from"./disclose-version.BE_RHt7t.js";import{p as nt,j as dt,a as ct,g as a,b as mt,c as s,t as c,s as d,r as o,d as H,e as ut}from"./runtime.CN-Xrd-W.js";import{i as A}from"./if.DakFUcz9.js";import{e as L,i as N}from"./each.-eFyfI3H.js";import{p as R,s as M,w as vt,a as ft,i as gt}from"./db.BgZNK8ZD.js";import{s as I}from"./class.YwXVpuit.js";import{p as q}from"./proxy.D0RktEAV.js";import{p as w}from"./props.CZekZOSG.js";import{I as pt,X as _t}from"./Icon.DplCSlqd.js";import{n as bt}from"./util.Dc-uiH8q.js";import{p as wt}from"./index.BbncDlnT.js";function ht(m,e){let k=w(e,"size",3,"24");pt(m,{src:_t,get size(){return k()}})}const xt=(m,e)=>{bt(`./profile/${a(e).username}`,wt.url.pathname)};function G(m,e){H(e,null)}var yt=f('<span class="absolute left-2 top-2 rounded bg-gray-700 px-2 py-1 text-xs text-white">Closed</span>'),At=f('<button type="button" aria-label="View artwork details"><img alt="Artwork"> <!></button>'),kt=f('<img alt="Artwork">'),jt=m=>m.stopImmediatePropagation(),Bt=f('<span class="rounded bg-orange-100 px-2 py-1 text-xs font-medium text-orange-600"> </span>'),Dt=f(`<button class="mt-4 block rounded-lg bg-orange-500 px-4 py-2 
                                        text-center font-medium text-white"> </button>`),Pt=f(`<div class="modal-pop" role="dialog" aria-modal="true"><div class="relative rounded-lg shadow-lg dark:bg-stone-800 border-2 colour-border flex 
                     w-5/6 sm:w-auto sm:max-w-[90%] p-2 sm:p-6 sm:pr-16" role="dialog" aria-labelledby="modal-title" aria-describedby="modal-description"><button class="absolute right-2 top-2 w-8 h-8 flex items-center justify-center rounded-full 
                        bg-red-500 text-white hover:bg-red-600 text-lg" aria-label="Close popup"><!></button> <div class="flex flex-col sm:flex-row justify-center"><img alt="Artwork" class="h-64 sm:h-[30rem] sm:max-w-[50vw] w-auto rounded-md object-contain
                           mt-2 sm:mt-0"> <div class="p-2 sm:p-0 ml-0 sm:ml-6 flex flex-col justify-between sm:max-w-[25vw] "><div><h2 class="text-xl font-bold"> </h2> <h2 class="text-lg underline"> </h2> <p> </p> <p class="mt-2 text-sm sub-heading"> </p> <div class="mt-4 flex flex-wrap gap-2"></div></div> <div><!></div></div></div></div></div>`),zt=f("<!> <!> <!>",1);function Wt(m,e){nt(e,!0);let k=w(e,"showArtist",3,!0),T=w(e,"size",3,48),J=w(e,"artViewOnly",3,!1),V=w(e,"selectMode",3,!1),i=mt(null),j=ut(()=>{var t;return R("user",{},{id:(t=a(i))==null?void 0:t.artist})}),h=q(e.artDB.map(t=>!1));const K=4,Q=gt("artwork"),Y=t=>R("artist",{},{id:t});function Z(t){typeof t!="string"&&H(i,q(t))}function $(t,r){if(V())if(h[t]===!0){for(let l=0;l<e.selectArray.length;(l+=1)-1)e.selectArray[l].id==r.id&&e.selectArray.splice(l,1);h[t]=!1}else e.selectArray.length<K&&(e.selectArray.push(r),h[t]=!0)}function X(t){return typeof t=="string"&&t.startsWith("data:image")?t:typeof t=="object"&&t!==null&&!Array.isArray(t)&&t.imgSrc&&typeof t.imgSrc=="string"&&t.imgSrc.startsWith("data:image")?t.imgSrc:ft("artwork",t.imgSrc,Q)}var E=zt(),F=dt(E);L(F,17,()=>e.artDB,N,(t,r,l)=>{var n=At();n.__click=()=>{Z(a(r)),$(l,a(r))};var _=s(n);c(()=>M(_,"src",X(a(r))));var x=d(_,2);A(x,()=>{var u;return!((u=Y(a(r).artist))!=null&&u.openCommission)&&!J()},u=>{var y=yt();v(u,y)}),o(n),c(()=>{I(n,`relative w-full overflow-hidden rounded-lg colour-border border-2 bg-white shadow
                cursor-pointer
                ${(h[l]?"border-4 border-orange-600 dark:border-orange-600":"")??""}
        `),I(_,`h-${T()??""} w-full object-cover`)}),v(t,n)});var O=d(F,2);A(O,()=>e.artDB.length===0,t=>{var r=kt();c(()=>M(r,"src",vt("artwork",""))),c(()=>I(r,`h-${T()??""} w-full object-contain`)),v(t,r)});var tt=d(O,2);A(tt,()=>a(i)&&!V(),t=>{var r=Pt();r.__click=[G,i];var l=s(r);l.__click=[jt];var n=s(l);n.__click=[G,i];var _=s(n);ht(_,{size:"20"}),o(n);var x=d(n,2),u=s(x);c(()=>M(u,"src",X(a(i))));var y=d(u,2),B=s(y),D=s(B),et=s(D,!0);o(D);var P=d(D,2),rt=s(P);o(P);var z=d(P,2),at=s(z,!0);o(z);var S=d(z,2),ot=s(S,!0);c(()=>p(ot,a(i).datePosted?"Posted: "+new Date(a(i).datePosted).toLocaleDateString():"")),o(S);var U=d(S,2);L(U,21,()=>a(i).tags,N,(C,g)=>{var b=Bt(),it=s(b);o(b),c(()=>p(it,`#${a(g)??""}`)),v(C,b)}),o(U),o(B);var W=d(B,2),st=s(W);A(st,k,C=>{var g=Dt();g.__click=[xt,j];var b=s(g);o(g),c(()=>p(b,`To @${a(j).username??""}'s Profile`)),v(C,g)}),o(W),o(y),o(x),o(l),o(r),c(()=>{p(et,a(i).title||"Untitled Artwork"),p(rt,`By: ${a(j).displayName??""}`),p(at,a(i).description)}),v(t,r)}),v(m,E),ct()}lt(["click"]);export{Wt as B,ht as C};
