import{d as U,a as _,t as h,s as D}from"./disclose-version.BE_RHt7t.js";import{p as q,a8 as F,t as S,a as G,g as e,d as i,b as T,e as H,s as C,c as g,r as o,n as J}from"./runtime.CN-Xrd-W.js";import{i as M}from"./if.DakFUcz9.js";import{e as B,i as E}from"./each.-eFyfI3H.js";import{r as N,p as O}from"./db.BgZNK8ZD.js";import{s as L}from"./class.YwXVpuit.js";import{a as P}from"./input.aZJ5hW4Z.js";import{b as V}from"./this.BYyE19eJ.js";import{p as W}from"./props.CZekZOSG.js";function X(n,a,s,r,u,f){e(a)&&e(s).length>0&&(n.key==="ArrowDown"?(n.preventDefault(),i(r,(e(r)+1)%e(s).length)):n.key==="ArrowUp"?(n.preventDefault(),i(r,(e(r)-1+e(s).length)%e(s).length)):n.key==="Enter"&&(u.currentTags.push(e(s)[e(r)].name),f()))}var Y=h(`<div class="items-center space-x-1 rounded orange-tag px-2 py-1 orange-tag cursor-pointer flex
                            !bg-orange-100 text-orange-500 dark:!bg-orange-500 dark:!text-orange-100 svelte-1b6dfys"><span> </span> <button class="text-xs font-bold">x</button></div>`),Z=(n,a,s,r)=>{a.currentTags.push(e(s).name),r()},I=h('<li><span> </span> <span class="text-sm"> </span></li>'),$=h(`<ul class="left-0 z-30 mt-1 w-full rounded-lg border colour-border
                 bg-white overflow-clip shadow-lg dark:bg-stone-900"></ul>`),ee=h('<div class="relative"><div><div></div> <input type="text" placeholder="Search for tags..." class="entry w-full rounded-md colour-border shadow-sm focus:border-orange-500 focus:ring-orange-500 cursor-text"></div> <!></div>');function ce(n,a){q(a,!0);let s=W(a,"slim",3,!1),r=T(""),u=T(!1),f=H(()=>O("tags",{name:t=>t.name.toLowerCase().includes(e(r).toLowerCase())&&!a.currentTags.includes(t.name.toLowerCase())},{}).sort((t,c)=>c.count-t.count)),w=T(0),A=null;F(()=>{e(r).length>0?i(u,!0):i(u,!1)});function j(){i(r,""),i(u,!1),i(w,0)}var x=ee(),p=g(x),m=g(p);B(m,21,()=>a.currentTags,E,(t,c,k)=>{var l=Y();l.__click=()=>a.currentTags.splice(k,1);var b=g(l),d=g(b,!0);o(b),J(2),o(l),S(()=>D(d,e(c))),_(t,l)}),o(m);var v=C(m,2);N(v),v.__keydown=[X,u,f,w,a,j],V(v,t=>A=t,()=>A),o(p);var K=C(p,2);M(K,()=>e(u)&&e(f).length>0,t=>{var c=$();B(c,21,()=>e(f).slice(0,6),E,(k,l,b)=>{var d=I();d.__click=[Z,a,l,j];var y=g(d),Q=g(y,!0);o(y);var z=C(y,2),R=g(z);o(z),o(d),S(()=>{L(d,`flex cursor-pointer items-center justify-between px-4 py-2
                    hover:bg-orange-100 hover:dark:bg-orange-700 text-stone-700 dark:text-stone-200 
                    ${(b===e(w)?"bg-orange-100 dark:bg-orange-700":"")??""}`),D(Q,e(l).name),D(R,`(${e(l).count??""})`)}),_(k,d)}),o(c),_(t,c)}),o(x),S(()=>{L(p,s()?"":"mt-1 block w-full rounded-md border colour-border bg-white p-2 shadow-sm"),L(m,`${(a.currentTags.length>0?"mb-2":"")??""} flex flex-wrap gap-2`)}),P(v,()=>e(r),t=>i(r,t)),_(n,x),G()}U(["click","keydown"]);export{ce as S};
